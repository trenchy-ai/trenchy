/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@dailymotion/vast-client/dist/vast-client.min.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@dailymotion/vast-client/dist/vast-client.min.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("!function(e,t){ true?t(exports):0}(this,(function(e){\"use strict\";function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function r(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function i(e){return i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i(e)}function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,\"prototype\",{writable:!1}),e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,\"prototype\",{writable:!1}),t&&c(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function d(e,t){if(t&&(\"object\"==typeof t||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function p(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=u(e);if(t){var n=u(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return d(this,r)}}function h(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}(e)||function(e,t){if(!e)return;if(\"string\"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===r&&e.constructor&&(r=e.constructor.name);if(\"Map\"===r||\"Set\"===r)return Array.from(e);if(\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}var m=[\"ADCATEGORIES\",\"ADCOUNT\",\"ADPLAYHEAD\",\"ADSERVINGID\",\"ADTYPE\",\"APIFRAMEWORKS\",\"APPBUNDLE\",\"ASSETURI\",\"BLOCKEDADCATEGORIES\",\"BREAKMAXADLENGTH\",\"BREAKMAXADS\",\"BREAKMAXDURATION\",\"BREAKMINADLENGTH\",\"BREAKMINDURATION\",\"BREAKPOSITION\",\"CLICKPOS\",\"CLICKTYPE\",\"CLIENTUA\",\"CONTENTID\",\"CONTENTPLAYHEAD\",\"CONTENTURI\",\"DEVICEIP\",\"DEVICEUA\",\"DOMAIN\",\"EXTENSIONS\",\"GDPRCONSENT\",\"IFA\",\"IFATYPE\",\"INVENTORYSTATE\",\"LATLONG\",\"LIMITADTRACKING\",\"MEDIAMIME\",\"MEDIAPLAYHEAD\",\"OMIDPARTNER\",\"PAGEURL\",\"PLACEMENTTYPE\",\"PLAYERCAPABILITIES\",\"PLAYERSIZE\",\"PLAYERSTATE\",\"PODSEQUENCE\",\"REGULATIONS\",\"SERVERSIDE\",\"SERVERUA\",\"TRANSACTIONID\",\"UNIVERSALADID\",\"VASTVERSIONS\",\"VERIFICATIONVENDORS\"];function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=[],n=A(e);for(var a in!t.ERRORCODE||r.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=E(Math.round(1e8*Math.random())),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING,t)t[a]=b(t[a]);for(var o in n){var s=n[o];\"string\"==typeof s&&i.push(y(s,t))}return i}function y(e,t){var r=(e=T(e,t)).match(/[^[\\]]+(?=])/g);if(!r)return e;var i=r.filter((function(e){return m.indexOf(e)>-1}));return 0===i.length?e:T(e,i=i.reduce((function(e,t){return e[t]=-1,e}),{}))}function T(e,t){var r=e;for(var i in t){var n=t[i];r=r.replace(new RegExp(\"(?:\\\\[|%%)(\".concat(i,\")(?:\\\\]|%%)\"),\"g\"),n)}return r}function A(e){return Array.isArray(e)?e.map((function(e){return e&&e.hasOwnProperty(\"url\")?e.url:e})):e}function k(e,t){for(var r=0;r<t.length;r++)if(R(t[r],e))return!0;return!1}function R(e,t){if(e&&t){var r=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);return r.length===i.length&&(e.id===t.id&&e.url===t.url)}return!1}function b(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return\"%\".concat(e.charCodeAt(0).toString(16))}))}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e.toString().padStart(t,\"0\")}var N={track:function(e,t,r){g(e,t,r).forEach((function(e){\"undefined\"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:g,extractURLsFromTemplates:A,containsTemplateObject:k,isTemplateObjectEqual:R,encodeURIComponentRFC3986:b,replaceUrlMacros:y,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,r){return t.concat(Array.isArray(r)?e(r):r)}),[])},joinArrayOfUniqueTemplateObjs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Array.isArray(e)?e:[],i=Array.isArray(t)?t:[],n=r.concat(i);return n.reduce((function(e,t){return k(t,e)||e.push(t),e}),[])},isValidTimeValue:function(e){return Number.isFinite(e)&&e>=-2},addLeadingZeros:E};function L(e){return-1!==[\"true\",\"TRUE\",\"True\",\"1\"].indexOf(e)}var w={childByName:function(e,t){var r=e.childNodes;for(var i in r){var n=r[i];if(n.nodeName===t)return n}},childrenByName:function(e,t){var r=[],i=e.childNodes;for(var n in i){var a=i[n];a.nodeName===t&&r.push(a)}return r},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf(\"//\")){var r=location.protocol;return\"\".concat(r).concat(e)}if(-1===e.indexOf(\"://\")){var i=t.slice(0,t.lastIndexOf(\"/\"));return\"\".concat(i,\"/\").concat(e)}return e},parseBoolean:L,parseNodeText:function(e){return e&&(e.textContent||e.text||\"\").trim()},copyNodeAttribute:function(e,t,r){var i=t.getAttribute(e);i&&r.setAttribute(e,i)},parseAttributes:function(e){for(var t=e.attributes,r={},i=0;i<t.length;i++)r[t[i].nodeName]=t[i].nodeValue;return r},parseDuration:function(e){if(null==e)return-1;if(N.isNumeric(e))return parseInt(e);var t=e.split(\":\");if(3!==t.length)return-1;var r=t[2].split(\".\"),i=parseInt(r[0]);2===r.length&&(i+=parseFloat(\"0.\".concat(r[1])));var n=parseInt(60*t[1]),a=parseInt(60*t[0]*60);return isNaN(a)||isNaN(n)||isNaN(i)||n>3600||i>60?-1:a+n+i},splitVAST:function(e){var t=[],r=null;return e.forEach((function(i,n){if(i.sequence&&(i.sequence=parseInt(i.sequence,10)),i.sequence>1){var a=e[n-1];if(a&&a.sequence===i.sequence-1)return void(r&&r.push(i));delete i.sequence}r=[i],t.push(r)})),t},assignAttributes:function(e,t){if(e)for(var r in e){var i=e[r];if(i.nodeName&&i.nodeValue&&t.hasOwnProperty(i.nodeName)){var n=i.nodeValue;\"boolean\"==typeof t[i.nodeName]&&(n=L(n)),t[i.nodeName]=n}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),t.viewableImpression.length>0&&(e.viewableImpression=[].concat(h(e.viewableImpression),h(t.viewableImpression))),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;var r=(t.creatives||[]).filter((function(e){return e&&\"companion\"===e.type})),i=r.reduce((function(e,t){return(t.variations||[]).forEach((function(t){(t.companionClickTrackingURLTemplates||[]).forEach((function(t){N.containsTemplateObject(t,e)||e.push(t)}))})),e}),[]);e.creatives=r.concat(e.creatives);var n=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,a=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var r in t.trackingEvents[e.type]){var o=t.trackingEvents[e.type][r];Array.isArray(e.trackingEvents[r])||(e.trackingEvents[r]=[]),e.trackingEvents[r]=e.trackingEvents[r].concat(o)}\"linear\"===e.type&&(n&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),a&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),\"companion\"===e.type&&i.length&&(e.variations||[]).forEach((function(e){e.companionClickTrackingURLTemplates=N.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,i)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function U(e,t){var r=function(){var e=f(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,i=e.sequence,n=e.apiFramework;return{id:t,adId:r,sequence:i,apiFramework:n,type:\"companion\",required:null,variations:[]}}(t);return r.required=e.getAttribute(\"required\")||null,r.variations=w.childrenByName(e,\"Companion\").map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:\"companionAd\",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||null,pxratio:e.pxratio||\"1\",renderingMode:e.renderingMode||\"default\",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(w.parseAttributes(e));t.htmlResources=w.childrenByName(e,\"HTMLResource\").reduce((function(e,t){var r=w.parseNodeText(t);return r?e.concat(r):e}),[]),t.iframeResources=w.childrenByName(e,\"IFrameResource\").reduce((function(e,t){var r=w.parseNodeText(t);return r?e.concat(r):e}),[]),t.staticResources=w.childrenByName(e,\"StaticResource\").reduce((function(e,t){var r=w.parseNodeText(t);return r?e.concat({url:r,creativeType:t.getAttribute(\"creativeType\")||null}):e}),[]),t.altText=w.parseNodeText(w.childByName(e,\"AltText\"))||null;var r=w.childByName(e,\"TrackingEvents\");r&&w.childrenByName(r,\"Tracking\").forEach((function(e){var r=e.getAttribute(\"event\"),i=w.parseNodeText(e);r&&i&&(Array.isArray(t.trackingEvents[r])||(t.trackingEvents[r]=[]),t.trackingEvents[r].push(i))})),t.companionClickTrackingURLTemplates=w.childrenByName(e,\"CompanionClickTracking\").map((function(e){return{id:e.getAttribute(\"id\")||null,url:w.parseNodeText(e)}})),t.companionClickThroughURLTemplate=w.parseNodeText(w.childByName(e,\"CompanionClickThrough\"))||null;var i=w.childByName(e,\"AdParameters\");return i&&(t.adParameters=w.parseNodeText(i),t.xmlEncoded=i.getAttribute(\"xmlEncoded\")||null),t})),r}function C(e){return\"linear\"===e.type}function I(e,t){var r,i=function(){var e=f(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,i=e.sequence,n=e.apiFramework;return{id:t,adId:r,sequence:i,apiFramework:n,type:\"linear\",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);i.duration=w.parseDuration(w.parseNodeText(w.childByName(e,\"Duration\")));var n=e.getAttribute(\"skipoffset\");if(null==n)i.skipDelay=null;else if(\"%\"===n.charAt(n.length-1)&&-1!==i.duration){var a=parseInt(n,10);i.skipDelay=i.duration*(a/100)}else i.skipDelay=w.parseDuration(n);var o=w.childByName(e,\"VideoClicks\");if(o){var s=w.childByName(o,\"ClickThrough\");i.videoClickThroughURLTemplate=s?{id:s.getAttribute(\"id\")||null,url:w.parseNodeText(s)}:null,w.childrenByName(o,\"ClickTracking\").forEach((function(e){i.videoClickTrackingURLTemplates.push({id:e.getAttribute(\"id\")||null,url:w.parseNodeText(e)})})),w.childrenByName(o,\"CustomClick\").forEach((function(e){i.videoCustomClickURLTemplates.push({id:e.getAttribute(\"id\")||null,url:w.parseNodeText(e)})}))}var l=w.childByName(e,\"AdParameters\");l&&(i.adParameters=w.parseNodeText(l)),w.childrenByName(e,\"TrackingEvents\").forEach((function(e){w.childrenByName(e,\"Tracking\").forEach((function(e){var t=e.getAttribute(\"event\"),n=w.parseNodeText(e);if(t&&n){if(\"progress\"===t){if(!(r=e.getAttribute(\"offset\")))return;t=\"%\"===r.charAt(r.length-1)?\"progress-\".concat(r):\"progress-\".concat(Math.round(w.parseDuration(r)))}Array.isArray(i.trackingEvents[t])||(i.trackingEvents[t]=[]),i.trackingEvents[t].push(n)}}))})),w.childrenByName(e,\"MediaFiles\").forEach((function(e){w.childrenByName(e,\"MediaFile\").forEach((function(e){i.mediaFiles.push(function(e){var t={id:null,fileURL:null,fileSize:0,deliveryType:\"progressive\",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute(\"id\"),t.fileURL=w.parseNodeText(e),t.deliveryType=e.getAttribute(\"delivery\"),t.codec=e.getAttribute(\"codec\"),t.mimeType=e.getAttribute(\"type\"),t.mediaType=e.getAttribute(\"mediaType\")||\"2D\",t.apiFramework=e.getAttribute(\"apiFramework\"),t.fileSize=parseInt(e.getAttribute(\"fileSize\")||0),t.bitrate=parseInt(e.getAttribute(\"bitrate\")||0),t.minBitrate=parseInt(e.getAttribute(\"minBitrate\")||0),t.maxBitrate=parseInt(e.getAttribute(\"maxBitrate\")||0),t.width=parseInt(e.getAttribute(\"width\")||0),t.height=parseInt(e.getAttribute(\"height\")||0);var r=e.getAttribute(\"scalable\");r&&\"string\"==typeof r&&(t.scalable=w.parseBoolean(r));var i=e.getAttribute(\"maintainAspectRatio\");i&&\"string\"==typeof i&&(t.maintainAspectRatio=w.parseBoolean(i));return t}(e))}));var t=w.childByName(e,\"InteractiveCreativeFile\");t&&(i.interactiveCreativeFile=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:w.parseBoolean(e.variableDuration),fileURL:null}}(w.parseAttributes(e));return t.fileURL=w.parseNodeText(e),t}(t));var r=w.childByName(e,\"ClosedCaptionFiles\");r&&w.childrenByName(r,\"ClosedCaptionFile\").forEach((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(w.parseAttributes(e));t.fileURL=w.parseNodeText(e),i.closedCaptionFiles.push(t)}));var n,a,o,s=w.childByName(e,\"Mezzanine\"),l=(n=s,a={},o=!1,[\"delivery\",\"type\",\"width\",\"height\"].forEach((function(e){n&&n.getAttribute(e)?a[e]=n.getAttribute(e):o=!0})),o?null:a);if(l){var u={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:\"2D\"};u.id=s.getAttribute(\"id\"),u.fileURL=w.parseNodeText(s),u.delivery=l.delivery,u.codec=s.getAttribute(\"codec\"),u.type=l.type,u.width=parseInt(l.width,10),u.height=parseInt(l.height,10),u.fileSize=parseInt(s.getAttribute(\"fileSize\"),10),u.mediaType=s.getAttribute(\"mediaType\")||\"2D\",i.mezzanine=u}}));var u=w.childByName(e,\"Icons\");return u&&w.childrenByName(u,\"Icon\").forEach((function(e){i.icons.push(function(e){var t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:\"1\",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};t.program=e.getAttribute(\"program\"),t.height=parseInt(e.getAttribute(\"height\")||0),t.width=parseInt(e.getAttribute(\"width\")||0),t.xPosition=function(e){if(-1!==[\"left\",\"right\"].indexOf(e))return e;return parseInt(e||0)}(e.getAttribute(\"xPosition\")),t.yPosition=function(e){if(-1!==[\"top\",\"bottom\"].indexOf(e))return e;return parseInt(e||0)}(e.getAttribute(\"yPosition\")),t.apiFramework=e.getAttribute(\"apiFramework\"),t.pxratio=e.getAttribute(\"pxratio\")||\"1\",t.offset=w.parseDuration(e.getAttribute(\"offset\")),t.duration=w.parseDuration(e.getAttribute(\"duration\")),w.childrenByName(e,\"HTMLResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||\"text/html\",t.htmlResource=w.parseNodeText(e)})),w.childrenByName(e,\"IFrameResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||0,t.iframeResource=w.parseNodeText(e)})),w.childrenByName(e,\"StaticResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||0,t.staticResource=w.parseNodeText(e)}));var r=w.childByName(e,\"IconClicks\");r&&(t.iconClickThroughURLTemplate=w.parseNodeText(w.childByName(r,\"IconClickThrough\")),w.childrenByName(r,\"IconClickTracking\").forEach((function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute(\"id\")||null,url:w.parseNodeText(e)})})));return t.iconViewTrackingURLTemplate=w.parseNodeText(w.childByName(e,\"IconViewTracking\")),t}(e))})),i}function x(e,t){var r=function(){var e=f(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,r=e.adId,i=e.sequence,n=e.apiFramework;return{id:t,adId:r,sequence:i,apiFramework:n,type:\"nonlinear\",variations:[],trackingEvents:{}}}(t);return w.childrenByName(e,\"TrackingEvents\").forEach((function(e){var t,i;w.childrenByName(e,\"Tracking\").forEach((function(e){t=e.getAttribute(\"event\"),i=w.parseNodeText(e),t&&i&&(Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i))}))})),w.childrenByName(e,\"NonLinear\").forEach((function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:\"static\",adType:\"nonLinearAd\",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t.id=e.getAttribute(\"id\")||null,t.width=e.getAttribute(\"width\"),t.height=e.getAttribute(\"height\"),t.expandedWidth=e.getAttribute(\"expandedWidth\"),t.expandedHeight=e.getAttribute(\"expandedHeight\"),t.scalable=w.parseBoolean(e.getAttribute(\"scalable\")),t.maintainAspectRatio=w.parseBoolean(e.getAttribute(\"maintainAspectRatio\")),t.minSuggestedDuration=w.parseDuration(e.getAttribute(\"minSuggestedDuration\")),t.apiFramework=e.getAttribute(\"apiFramework\"),w.childrenByName(e,\"HTMLResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||\"text/html\",t.htmlResource=w.parseNodeText(e)})),w.childrenByName(e,\"IFrameResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||0,t.iframeResource=w.parseNodeText(e)})),w.childrenByName(e,\"StaticResource\").forEach((function(e){t.type=e.getAttribute(\"creativeType\")||0,t.staticResource=w.parseNodeText(e)}));var i=w.childByName(e,\"AdParameters\");i&&(t.adParameters=w.parseNodeText(i)),t.nonlinearClickThroughURLTemplate=w.parseNodeText(w.childByName(e,\"NonLinearClickThrough\")),w.childrenByName(e,\"NonLinearClickTracking\").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute(\"id\")||null,url:w.parseNodeText(e)})})),r.variations.push(t)})),r}function S(e){var t=[];return e.forEach((function(e){var r=O(e);r&&t.push(r)})),t}function O(e){if(\"#comment\"===e.nodeName)return null;var t,r={name:null,value:null,attributes:{},children:[]},i=e.attributes,n=e.childNodes;if(r.name=e.nodeName,e.attributes)for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];o.nodeName&&o.nodeValue&&(r.attributes[o.nodeName]=o.nodeValue)}for(var s in n)if(n.hasOwnProperty(s)){var l=O(n[s]);l&&r.children.push(l)}if(0===r.children.length||1===r.children.length&&[\"#cdata-section\",\"#text\"].indexOf(r.children[0].name)>=0){var u=w.parseNodeText(e);\"\"!==u&&(r.value=u),r.children=[]}return null===(t=r).value&&0===Object.keys(t.attributes).length&&0===t.children.length?null:r}function D(e){var t=[];return e.forEach((function(e){var r,i={id:e.getAttribute(\"id\")||null,adId:V(e),sequence:e.getAttribute(\"sequence\")||null,apiFramework:e.getAttribute(\"apiFramework\")||null},n=[];w.childrenByName(e,\"UniversalAdId\").forEach((function(e){var t={idRegistry:e.getAttribute(\"idRegistry\")||\"unknown\",value:w.parseNodeText(e)};n.push(t)}));var a=w.childByName(e,\"CreativeExtensions\");for(var o in a&&(r=S(w.childrenByName(a,\"CreativeExtension\"))),e.childNodes){var s=e.childNodes[o],l=void 0;switch(s.nodeName){case\"Linear\":l=I(s,i);break;case\"NonLinearAds\":l=x(s,i);break;case\"CompanionAds\":l=U(s,i)}l&&(n&&(l.universalAdIds=n),r&&(l.creativeExtensions=r),t.push(l))}})),t}function V(e){return e.getAttribute(\"AdID\")||e.getAttribute(\"adID\")||e.getAttribute(\"adId\")||null}var P={Wrapper:{subElements:[\"VASTAdTagURI\",\"Impression\"]},BlockedAdCategories:{attributes:[\"authority\"]},InLine:{subElements:[\"AdSystem\",\"AdTitle\",\"Impression\",\"AdServingId\",\"Creatives\"]},Category:{attributes:[\"authority\"]},Pricing:{attributes:[\"model\",\"currency\"]},Verification:{oneOfinLineResources:[\"JavaScriptResource\",\"ExecutableResource\"],attributes:[\"vendor\"]},UniversalAdId:{attributes:[\"idRegistry\"]},JavaScriptResource:{attributes:[\"apiFramework\",\"browserOptional\"]},ExecutableResource:{attributes:[\"apiFramework\",\"type\"]},Tracking:{attributes:[\"event\"]},Creatives:{subElements:[\"Creative\"]},Creative:{subElements:[\"UniversalAdId\"]},Linear:{subElements:[\"MediaFiles\",\"Duration\"]},MediaFiles:{subElements:[\"MediaFile\"]},MediaFile:{attributes:[\"delivery\",\"type\",\"width\",\"height\"]},Mezzanine:{attributes:[\"delivery\",\"type\",\"width\",\"height\"]},NonLinear:{oneOfinLineResources:[\"StaticResource\",\"IFrameResource\",\"HTMLResource\"],attributes:[\"width\",\"height\"]},Companion:{oneOfinLineResources:[\"StaticResource\",\"IFrameResource\",\"HTMLResource\"],attributes:[\"width\",\"height\"]},StaticResource:{attributes:[\"creativeType\"]},Icons:{subElements:[\"Icon\"]},Icon:{oneOfinLineResources:[\"StaticResource\",\"IFrameResource\",\"HTMLResource\"]}};function B(e,t){if(P[e.nodeName]&&P[e.nodeName].attributes){var r=P[e.nodeName].attributes.filter((function(t){return!e.getAttribute(t)}));r.length>0&&j({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:r},t)}}function F(e,t,r){var i=P[e.nodeName],n=!r&&\"Wrapper\"!==e.nodeName;if(i&&!n){if(i.subElements){var a=i.subElements.filter((function(t){return!w.childByName(e,t)}));a.length>0&&j({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:a},t)}if(r&&i.oneOfinLineResources)i.oneOfinLineResources.some((function(t){return w.childByName(e,t)}))||j({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:i.oneOfinLineResources},t)}}function M(e){return e.children&&0!==e.children.length}function j(e,t){var r=e.name,i=e.parentName,n=e.attributes,a=e.subElements,o=e.oneOfResources,s=\"Element '\".concat(r,\"'\");t(\"VAST-warning\",{message:s+=n?\" missing required attribute(s) '\".concat(n.join(\", \"),\"' \"):a?\" missing required sub element(s) '\".concat(a.join(\", \"),\"' \"):o?\" must provide one of the following '\".concat(o.join(\", \"),\"' \"):\" is empty\",parentElement:i,specVersion:4.1})}var W={verifyRequiredValues:function e(t,r,i){if(t&&t.nodeName)if(\"InLine\"===t.nodeName&&(i=!0),B(t,r),M(t)){F(t,r,i);for(var n=0;n<t.children.length;n++)e(t.children[n],r,i)}else 0===w.parseNodeText(t).length&&j({name:t.nodeName,parentName:t.parentNode.nodeName},r)},hasSubElements:M,emitMissingValueWarning:j,verifyRequiredAttributes:B,verifyRequiredSubElements:F};function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.allowMultipleAds,n=r.followAdditionalWrappers,a=e.childNodes;for(var o in a){var s=a[o];if(-1!==[\"Wrapper\",\"InLine\"].indexOf(s.nodeName)&&(\"Wrapper\"!==s.nodeName||!1!==n)){if(w.copyNodeAttribute(\"id\",e,s),w.copyNodeAttribute(\"sequence\",e,s),w.copyNodeAttribute(\"adType\",e,s),\"Wrapper\"===s.nodeName)return{ad:G(s,t),type:\"WRAPPER\"};if(\"InLine\"===s.nodeName)return{ad:H(s,t,{allowMultipleAds:i}),type:\"INLINE\"}}}}function H(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.allowMultipleAds;return!1===i&&e.getAttribute(\"sequence\")?null:_(e,t)}function _(e,t){var r=[];t&&W.verifyRequiredValues(e,t);var i=e.childNodes,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(w.parseAttributes(e));for(var a in i){var o=i[a];switch(o.nodeName){case\"Error\":n.errorURLTemplates.push(w.parseNodeText(o));break;case\"Impression\":n.impressionURLTemplates.push({id:o.getAttribute(\"id\")||null,url:w.parseNodeText(o)});break;case\"Creatives\":n.creatives=D(w.childrenByName(o,\"Creative\"));break;case\"Extensions\":var s=w.childrenByName(o,\"Extension\");n.extensions=S(s),n.adVerifications.length||(r=Y(s));break;case\"AdVerifications\":n.adVerifications=z(w.childrenByName(o,\"Verification\"));break;case\"AdSystem\":n.system={value:w.parseNodeText(o),version:o.getAttribute(\"version\")||null};break;case\"AdTitle\":n.title=w.parseNodeText(o);break;case\"AdServingId\":n.adServingId=w.parseNodeText(o);break;case\"Category\":n.categories.push({authority:o.getAttribute(\"authority\")||null,value:w.parseNodeText(o)});break;case\"Expires\":n.expires=parseInt(w.parseNodeText(o),10);break;case\"ViewableImpression\":n.viewableImpression.push(X(o));break;case\"Description\":n.description=w.parseNodeText(o);break;case\"Advertiser\":n.advertiser={id:o.getAttribute(\"id\")||null,value:w.parseNodeText(o)};break;case\"Pricing\":n.pricing={value:w.parseNodeText(o),model:o.getAttribute(\"model\")||null,currency:o.getAttribute(\"currency\")||null};break;case\"Survey\":n.survey=w.parseNodeText(o);break;case\"BlockedAdCategories\":n.blockedAdCategories.push({authority:o.getAttribute(\"authority\")||null,value:w.parseNodeText(o)})}}return r.length&&(n.adVerifications=n.adVerifications.concat(r)),n}function G(e,t){var r=_(e,t),i=e.getAttribute(\"followAdditionalWrappers\"),n=e.getAttribute(\"allowMultipleAds\"),a=e.getAttribute(\"fallbackOnNoAd\");r.followAdditionalWrappers=!i||w.parseBoolean(i),r.allowMultipleAds=!!n&&w.parseBoolean(n),r.fallbackOnNoAd=a?w.parseBoolean(a):null;var o=w.childByName(e,\"VASTAdTagURI\");if(o?r.nextWrapperURL=w.parseNodeText(o):(o=w.childByName(e,\"VASTAdTagURL\"))&&(r.nextWrapperURL=w.parseNodeText(w.childByName(o,\"URL\"))),r.creatives.forEach((function(e){if(-1!==[\"linear\",\"nonlinear\"].indexOf(e.type)){if(e.trackingEvents){r.trackingEvents||(r.trackingEvents={}),r.trackingEvents[e.type]||(r.trackingEvents[e.type]={});var t=function(t){var i=e.trackingEvents[t];Array.isArray(r.trackingEvents[e.type][t])||(r.trackingEvents[e.type][t]=[]),i.forEach((function(i){r.trackingEvents[e.type][t].push(i)}))};for(var i in e.trackingEvents)t(i)}e.videoClickTrackingURLTemplates&&(Array.isArray(r.videoClickTrackingURLTemplates)||(r.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){r.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(r.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(r.videoCustomClickURLTemplates)||(r.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){r.videoCustomClickURLTemplates.push(e)})))}})),r.nextWrapperURL)return r}function z(e){var t=[];return e.forEach((function(e){var r={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},i=e.childNodes;for(var n in w.assignAttributes(e.attributes,r),i){var a=i[n];switch(a.nodeName){case\"JavaScriptResource\":case\"ExecutableResource\":r.resource=w.parseNodeText(a),w.assignAttributes(a.attributes,r);break;case\"VerificationParameters\":r.parameters=w.parseNodeText(a)}}var o=w.childByName(e,\"TrackingEvents\");o&&w.childrenByName(o,\"Tracking\").forEach((function(e){var t=e.getAttribute(\"event\"),i=w.parseNodeText(e);t&&i&&(Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i))})),t.push(r)})),t}function Y(e){var t=null,r=[];return e.some((function(e){return t=w.childByName(e,\"AdVerifications\")})),t&&(r=z(w.childrenByName(t,\"Verification\"))),r}function X(e){var t={};t.id=e.getAttribute(\"id\")||null;var r=e.childNodes;for(var i in r){var n=r[i],a=n.nodeName,o=w.parseNodeText(n);if((\"Viewable\"===a||\"NotViewable\"===a||\"ViewUndetermined\"===a)&&o){var s=a.toLowerCase();Array.isArray(t[s])||(t[s]=[]),t[s].push(o)}}return t}var K=function(){function e(){n(this,e),this._handlers=[]}return o(e,[{key:\"on\",value:function(e,t){if(\"function\"!=typeof t)throw new TypeError(\"The handler argument must be of type Function. Received type \".concat(i(t)));if(!e)throw new TypeError(\"The event argument must be of type String. Received type \".concat(i(e)));return this._handlers.push({event:e,handler:t}),this}},{key:\"once\",value:function(e,t){return this.on(e,function(e,t,r){var i={fired:!1,wrapFn:void 0};function n(){i.fired||(e.off(t,i.wrapFn),i.fired=!0,r.bind(e).apply(void 0,arguments))}return i.wrapFn=n,n}(this,e,t))}},{key:\"off\",value:function(e,t){return this._handlers=this._handlers.filter((function(r){return r.event!==e||r.handler!==t})),this}},{key:\"emit\",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var n=!1;return this._handlers.forEach((function(t){\"*\"===t.event&&(n=!0,t.handler.apply(t,[e].concat(r))),t.event===e&&(n=!0,t.handler.apply(t,r))})),n}},{key:\"removeAllListeners\",value:function(e){return e?(this._handlers=this._handlers.filter((function(t){return t.event!==e})),this):(this._handlers=[],this)}},{key:\"listenerCount\",value:function(e){return this._handlers.filter((function(t){return t.event===e})).length}},{key:\"listeners\",value:function(e){return this._handlers.reduce((function(t,r){return r.event===e&&t.push(r.handler),t}),[])}},{key:\"eventNames\",value:function(){return this._handlers.map((function(e){return e.event}))}}]),e}();var Q={get:function(e,t,r){r(new Error(\"Please bundle the library for node to use the node urlHandler\"))}},Z=12e4;function J(){try{var e=new window.XMLHttpRequest;return\"withCredentials\"in e?e:null}catch(e){return null}}function $(e,t,r){var i=r?408:e.status,n=r?\"XHRURLHandler: Request timed out after \".concat(e.timeout,\" ms (\").concat(i,\")\"):\"XHRURLHandler: \".concat(e.statusText,\" (\").concat(i,\")\");t(new Error(n),null,{statusCode:i})}var ee={get:function(e,t,r){if(\"https:\"===window.location.protocol&&0===e.indexOf(\"http://\"))return r(new Error(\"XHRURLHandler: Cannot go from HTTPS to HTTP.\"));try{var i=J();i.open(\"GET\",e),i.timeout=t.timeout||Z,i.withCredentials=t.withCredentials||!1,i.overrideMimeType&&i.overrideMimeType(\"text/xml\"),i.onload=function(){return function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):$(e,t,!1)}(i,r)},i.onerror=function(){return $(i,r,!1)},i.onabort=function(){return $(i,r,!1)},i.ontimeout=function(){return $(i,r,!0)},i.send()}catch(e){r(new Error(\"XHRURLHandler: Unexpected error\"))}},supported:function(){return!!J()}};var te={get:function(e,t,r){return r||(\"function\"==typeof t&&(r=t),t={}),\"undefined\"==typeof window||null===window?Q.get(e,t,r):ee.supported()?ee.get(e,t,r):r(new Error(\"Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler\"))}};var re=0,ie=0,ne=function(e,t){!e||!t||e<=0||t<=0||(ie=(ie*re+8*e/t)/++re)},ae={ERRORCODE:900,extensions:[]},oe=function(e){l(r,e);var t=p(r);function r(){var e;return n(this,r),(e=t.call(this)).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return o(r,[{key:\"addURLTemplateFilter\",value:function(e){\"function\"==typeof e&&this.URLTemplateFilters.push(e)}},{key:\"removeURLTemplateFilter\",value:function(){this.URLTemplateFilters.pop()}},{key:\"countURLTemplateFilters\",value:function(){return this.URLTemplateFilters.length}},{key:\"clearURLTemplateFilters\",value:function(){this.URLTemplateFilters=[]}},{key:\"trackVastError\",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];this.emit(\"VAST-error\",Object.assign.apply(Object,[{},ae,t].concat(i))),N.track(e,t)}},{key:\"getErrorURLTemplates\",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:\"getEstimatedBitrate\",value:function(){return ie}},{key:\"fetchVAST\",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(a,o){t.URLTemplateFilters.forEach((function(t){e=t(e)})),t.parentURLs.push(e);var s=Date.now();t.emit(\"VAST-resolving\",{url:e,previousUrl:i,wrapperDepth:r,maxWrapperDepth:t.maxWrapperDepth,timeout:t.fetchingOptions.timeout,wrapperAd:n}),t.urlHandler.get(e,t.fetchingOptions,(function(n,l){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=Math.round(Date.now()-s),d=Object.assign({url:e,previousUrl:i,wrapperDepth:r,error:n,duration:c},u);t.emit(\"VAST-resolved\",d),ne(u.byteLength,c),n?o(n):a(l)}))}))}},{key:\"initParsingStatus\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||Z,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL=\"\",this.urlHandler=e.urlHandler||e.urlhandler||te,this.vastVersion=null,ne(e.byteLength,e.requestDuration)}},{key:\"getRemainingAds\",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error(\"No more ads are available for the given VAST\"));var r=e?N.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(r,{wrapperDepth:0,url:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))}},{key:\"getAndParseVAST\",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(r),this.URLTemplateFilters.forEach((function(t){e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((function(i){return r.previousUrl=e,r.isRootVAST=!0,r.url=e,t.parse(i,r).then((function(e){return t.buildVASTResponse(e)}))}))}},{key:\"parseVAST\",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(r),r.isRootVAST=!0,this.parse(e,r).then((function(e){return t.buildVASTResponse(e)}))}},{key:\"buildVASTResponse\",value:function(e){var t,r={ads:(t={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:t.errorURLTemplates||[],version:t.version||null};return this.completeWrapperResolving(r),r}},{key:\"parseVastXml\",value:function(e,t){var r=t.isRootVAST,i=void 0!==r&&r,n=t.url,a=void 0===n?null:n,o=t.wrapperDepth,s=void 0===o?0:o,l=t.allowMultipleAds,u=t.followAdditionalWrappers;if(!e||!e.documentElement||\"VAST\"!==e.documentElement.nodeName)throw this.emit(\"VAST-ad-parsed\",{type:\"ERROR\",url:a,wrapperDepth:s}),new Error(\"Invalid VAST XMLDocument\");var c=[],d=e.documentElement.childNodes,p=e.documentElement.getAttribute(\"version\");for(var h in i&&p&&(this.vastVersion=p),d){var v=d[h];if(\"Error\"===v.nodeName){var f=w.parseNodeText(v);i?this.rootErrorURLTemplates.push(f):this.errorURLTemplates.push(f)}else if(\"Ad\"===v.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)l=!0;else if(!1===l&&c.length>1)break;var m=q(v,this.emit.bind(this),{allowMultipleAds:l,followAdditionalWrappers:u});m.ad?(c.push(m.ad),this.emit(\"VAST-ad-parsed\",{type:m.type,url:a,wrapperDepth:s,adIndex:c.length-1,vastVersion:p})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return c}},{key:\"parse\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.url,i=void 0===r?null:r,n=t.resolveAll,a=void 0===n||n,o=t.wrapperSequence,s=void 0===o?null:o,l=t.previousUrl,u=void 0===l?null:l,c=t.wrapperDepth,d=void 0===c?0:c,p=t.isRootVAST,h=void 0!==p&&p,v=t.followAdditionalWrappers,f=t.allowMultipleAds,m=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&h&&(f=!0);try{m=this.parseVastXml(e,{isRootVAST:h,url:i,wrapperDepth:d,allowMultipleAds:f,followAdditionalWrappers:v})}catch(e){return Promise.reject(e)}return 1===m.length&&null!=s&&(m[0].sequence=s),!1===a&&(this.remainingAds=w.splitVAST(m),m=this.remainingAds.shift()),this.resolveAds(m,{wrapperDepth:d,previousUrl:u,url:i})}},{key:\"resolveAds\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,i=r.wrapperDepth,n=r.previousUrl,a=r.url,o=[];return n=a,t.forEach((function(t){var r=e.resolveWrappers(t,i,n);o.push(r)})),Promise.all(o).then((function(t){var r=N.flatten(t);if(!r&&e.remainingAds.length>0){var o=e.remainingAds.shift();return e.resolveAds(o,{wrapperDepth:i,previousUrl:n,url:a})}return r}))}},{key:\"resolveWrappers\",value:function(e,t,r){var i=this;return new Promise((function(n){var a;if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,n(e);if(t>=i.maxWrapperDepth||-1!==i.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,n(e);e.nextWrapperURL=w.resolveVastAdTagURI(e.nextWrapperURL,r),i.URLTemplateFilters.forEach((function(t){e.nextWrapperURL=t(e.nextWrapperURL)}));var o=null!==(a=i.parsingOptions.allowMultipleAds)&&void 0!==a?a:e.allowMultipleAds,s=e.sequence;i.fetchVAST(e.nextWrapperURL,t,r,e).then((function(a){return i.parse(a,{url:e.nextWrapperURL,previousUrl:r,wrapperSequence:s,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:o}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],n(e);t.forEach((function(t){t&&w.mergeWrapperAdData(t,e)})),n(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,n(e)}))}))}},{key:\"completeWrapperResolving\",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var r=e.ads[t];(r.errorCode||0===r.creatives.length)&&(this.trackVastError(r.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:r.errorCode||303},{ERRORMESSAGE:r.errorMessage||\"\"},{extensions:r.extensions},{system:r.system}),e.ads.splice(t,1))}}}]),r}(K),se=null,le={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ue=function(){function e(){n(this,e),this.storage=this.initStorage()}return o(e,[{key:\"initStorage\",value:function(){if(se)return se;try{se=\"undefined\"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){se=null}return se&&!this.isStorageDisabled(se)||(se=le).clear(),se}},{key:\"isStorageDisabled\",value:function(e){var t=\"__VASTStorage__\";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:\"getItem\",value:function(e){return this.storage.getItem(e)}},{key:\"setItem\",value:function(e,t){return this.storage.setItem(e,t)}},{key:\"removeItem\",value:function(e){return this.storage.removeItem(e)}},{key:\"clear\",value:function(){return this.storage.clear()}}]),e}(),ce=function(){function e(t,r,i){n(this,e),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=r||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new oe,this.storage=i||new ue,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return o(e,[{key:\"getParser\",value:function(){return this.vastParser}},{key:\"lastSuccessfulAd\",get:function(){return this.storage.getItem(\"vast-client-last-successful-ad\")},set:function(e){this.storage.setItem(\"vast-client-last-successful-ad\",e)}},{key:\"totalCalls\",get:function(){return this.storage.getItem(\"vast-client-total-calls\")},set:function(e){this.storage.setItem(\"vast-client-total-calls\",e)}},{key:\"totalCallsTimeout\",get:function(){return this.storage.getItem(\"vast-client-total-calls-timeout\")},set:function(e){this.storage.setItem(\"vast-client-total-calls-timeout\",e)}},{key:\"hasRemainingAds\",value:function(){return this.vastParser.remainingAds.length>0}},{key:\"getNextAds\",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:\"get\",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Date.now();return(r=Object.assign({},this.defaultOptions,r)).hasOwnProperty(\"resolveAll\")||(r.resolveAll=!1),this.totalCallsTimeout<i?(this.totalCalls=1,this.totalCallsTimeout=i+36e5):this.totalCalls++,new Promise((function(n,a){if(t.cappingFreeLunch>=t.totalCalls)return a(new Error(\"VAST call canceled – FreeLunch capping not reached yet \".concat(t.totalCalls,\"/\").concat(t.cappingFreeLunch)));var o=i-t.lastSuccessfulAd;if(o<0)t.lastSuccessfulAd=0;else if(o<t.cappingMinimumTimeInterval)return a(new Error(\"VAST call canceled – (\".concat(t.cappingMinimumTimeInterval,\")ms minimum interval reached\")));t.vastParser.getAndParseVAST(e,r).then((function(e){return n(e)})).catch((function(e){return a(e)}))}))}}]),e}(),de=function(e){l(a,e);var t=p(a);function a(e,r,i){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var l in n(this,a),(o=t.call(this)).ad=r,o.creative=i,o.variation=s,o.muted=!1,o.impressed=!1,o.skippable=!1,o.trackingEvents={},o.lastPercentage=0,o._alreadyTriggeredQuartiles={},o.emitAlwaysEvents=[\"creativeView\",\"start\",\"firstQuartile\",\"midpoint\",\"thirdQuartile\",\"complete\",\"resume\",\"pause\",\"rewind\",\"skip\",\"closeLinear\",\"close\"],o.creative.trackingEvents){var u=o.creative.trackingEvents[l];o.trackingEvents[l]=u.slice(0)}return C(o.creative)?o._initLinearTracking():o._initVariationTracking(),e&&o.on(\"start\",(function(){e.lastSuccessfulAd=Date.now()})),o}return o(a,[{key:\"_initLinearTracking\",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:\"_initVariationTracking\",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}\"nonLinearAd\"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(e){return\"companionAd\"===e.adType}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:\"setDuration\",value:function(e){N.isValidTimeValue(e)&&(this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100})}},{key:\"setProgress\",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(N.isValidTimeValue(e)&&\"object\"===i(r)){var n=this.skipDelay||-1;if(-1===n||this.skippable||(n>e?this.emit(\"skip-countdown\",n-e):(this.skippable=!0,this.emit(\"skip-countdown\",0))),this.assetDuration>0){var a=Math.round(e/this.assetDuration*100),o=[];if(e>0){o.push(\"start\");for(var s=this.lastPercentage;s<a;s++)o.push(\"progress-\".concat(s+1,\"%\"));for(var l in o.push(\"progress-\".concat(Math.round(e))),this.quartiles)this.isQuartileReached(l,this.quartiles[l],e)&&(o.push(l),this._alreadyTriggeredQuartiles[l]=!0);this.lastPercentage=a}o.forEach((function(e){t.track(e,{macros:r,once:!0})})),e<this.progress&&this.track(\"rewind\",{macros:r})}this.progress=e}}},{key:\"isQuartileReached\",value:function(e,t,r){var i=!1;return t<=r&&!this._alreadyTriggeredQuartiles[e]&&(i=!0),i}},{key:\"setMuted\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};\"boolean\"==typeof e&&\"object\"===i(t)&&(this.muted!==e&&this.track(e?\"mute\":\"unmute\",{macros:t}),this.muted=e)}},{key:\"setPaused\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};\"boolean\"==typeof e&&\"object\"===i(t)&&(this.paused!==e&&this.track(e?\"pause\":\"resume\",{macros:t}),this.paused=e)}},{key:\"setFullscreen\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};\"boolean\"==typeof e&&\"object\"===i(t)&&(this.fullscreen!==e&&this.track(e?\"fullscreen\":\"exitFullscreen\",{macros:t}),this.fullscreen=e)}},{key:\"setExpand\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};\"boolean\"==typeof e&&\"object\"===i(t)&&(this.expanded!==e&&(this.track(e?\"expand\":\"collapse\",{macros:t}),this.track(e?\"playerExpand\":\"playerCollapse\",{macros:t})),this.expanded=e)}},{key:\"setSkipDelay\",value:function(e){N.isValidTimeValue(e)&&(this.skipDelay=e)}},{key:\"trackImpression\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&(this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track(\"creativeView\",{macros:e})))}},{key:\"error\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];\"object\"===i(e)&&\"boolean\"==typeof t&&this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:\"errorWithCode\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];\"string\"==typeof e&&\"boolean\"==typeof t&&(this.error({ERRORCODE:e},t),console.log(\"The method errorWithCode is deprecated, please use vast tracker error method instead\"))}},{key:\"complete\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&this.track(\"complete\",{macros:e})}},{key:\"notUsed\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&(this.track(\"notUsed\",{macros:e}),this.trackingEvents=[])}},{key:\"otherAdInteraction\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&this.track(\"otherAdInteraction\",{macros:e})}},{key:\"acceptInvitation\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&this.track(\"acceptInvitation\",{macros:e})}},{key:\"adExpand\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&this.track(\"adExpand\",{macros:e})}},{key:\"adCollapse\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&this.track(\"adCollapse\",{macros:e})}},{key:\"minimize\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&this.track(\"minimize\",{macros:e})}},{key:\"verificationNotExecuted\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(\"string\"==typeof e&&\"object\"===i(t)){if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error(\"No adVerifications provided\");if(!e)throw new Error(\"No vendor provided, unable to find associated verificationNotExecuted\");var r=this.ad.adVerifications.find((function(t){return t.vendor===e}));if(!r)throw new Error(\"No associated verification element found for vendor: \".concat(e));var n=r.trackingEvents;if(n&&n.verificationNotExecuted){var a=n.verificationNotExecuted;this.trackURLs(a,t),this.emit(\"verificationNotExecuted\",{trackingURLTemplates:a})}}}},{key:\"overlayViewDuration\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};\"string\"==typeof e&&\"object\"===i(t)&&(t.ADPLAYHEAD=e,this.track(\"overlayViewDuration\",{macros:t}))}},{key:\"close\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&this.track(this.linear?\"closeLinear\":\"close\",{macros:e})}},{key:\"skip\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&this.track(\"skip\",{macros:e})}},{key:\"load\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"object\"===i(e)&&this.track(\"loaded\",{macros:e})}},{key:\"click\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((null===e||\"string\"==typeof e)&&\"object\"===i(t)){this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t);var n=this.clickThroughURLTemplate||e,a=r({},t);if(n){this.progress&&(a.ADPLAYHEAD=this.progressFormatted());var o=N.resolveURLTemplates([n],a)[0];this.emit(\"clickthrough\",o)}}}},{key:\"track\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.macros,n=void 0===r?{}:r,a=t.once,o=void 0!==a&&a;if(\"object\"===i(n)){\"closeLinear\"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e=\"close\");var s=this.trackingEvents[e],l=this.emitAlwaysEvents.indexOf(e)>-1;s?(this.emit(e,{trackingURLTemplates:s}),this.trackURLs(s,n)):l&&this.emit(e,null),o&&(delete this.trackingEvents[e],l&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}}},{key:\"trackURLs\",value:function(e){var t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r({},n);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(o.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(o.ADPLAYHEAD=this.progressFormatted())),null!==(t=this.creative)&&void 0!==t&&null!==(i=t.universalAdIds)&&void 0!==i&&i.length&&(o.UNIVERSALADID=this.creative.universalAdIds.map((function(e){return e.idRegistry.concat(\" \",e.value)})).join(\",\")),this.ad&&(this.ad.sequence&&(o.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(o.ADTYPE=this.ad.adType),this.ad.adServingId&&(o.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(o.ADCATEGORIES=this.ad.categories.map((function(e){return e.value})).join(\",\")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(o.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),N.track(e,o,a)}},{key:\"convertToTimecode\",value:function(e){if(!N.isValidTimeValue(e))return\"\";var t=1e3*e,r=Math.floor(t/36e5),i=Math.floor(t/6e4%60),n=Math.floor(t/1e3%60),a=Math.floor(t%1e3);return\"\".concat(N.addLeadingZeros(r,2),\":\").concat(N.addLeadingZeros(i,2),\":\").concat(N.addLeadingZeros(n,2),\".\").concat(N.addLeadingZeros(a,3))}},{key:\"progressFormatted\",value:function(){return this.convertToTimecode(this.progress)}}]),a}(K);e.VASTClient=ce,e.VASTParser=oe,e.VASTTracker=de,Object.defineProperty(e,\"__esModule\",{value:!0})}));\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@dailymotion/vast-client/dist/vast-client.min.js?");

/***/ }),

/***/ "./node_modules/@dailymotion/vmap/src/adbreak.js":
/*!*******************************************************!*\
  !*** ./node_modules/@dailymotion/vmap/src/adbreak.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _adsource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adsource */ \"./node_modules/@dailymotion/vmap/src/adsource.js\");\n/* harmony import */ var _parser_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parser_utils */ \"./node_modules/@dailymotion/vmap/src/parser_utils.js\");\n\n\n\nclass VMAPAdBreak {\n  constructor(xml) {\n    this.timeOffset = xml.getAttribute('timeOffset');\n    this.breakType = xml.getAttribute('breakType');\n    this.breakId = xml.getAttribute('breakId');\n    this.repeatAfter = xml.getAttribute('repeatAfter');\n    this.adSource = null;\n    this.trackingEvents = [];\n    this.extensions = [];\n\n    for (const nodeKey in xml.childNodes) {\n      const node = xml.childNodes[nodeKey];\n\n      switch (node.localName) {\n        case 'AdSource':\n          this.adSource = new _adsource__WEBPACK_IMPORTED_MODULE_0__[\"default\"](node);\n          break;\n        case 'TrackingEvents':\n          for (const subnodeKey in node.childNodes) {\n            const subnode = node.childNodes[subnodeKey];\n\n            if (subnode.localName === 'Tracking') {\n              this.trackingEvents.push({\n                event: subnode.getAttribute('event'),\n                uri: (subnode.textContent || subnode.text || '').trim(),\n              });\n            }\n          }\n          break;\n        case 'Extensions':\n          this.extensions = (0,_parser_utils__WEBPACK_IMPORTED_MODULE_1__.childrenByName)(node, 'Extension').map((extension) =>\n            (0,_parser_utils__WEBPACK_IMPORTED_MODULE_1__.parseXMLNode)(extension)\n          );\n          break;\n      }\n    }\n  }\n\n  track(event, errorCode) {\n    for (const trackerKey in this.trackingEvents) {\n      const tracker = this.trackingEvents[trackerKey];\n\n      if (tracker.event === event) {\n        let { uri } = tracker;\n        if (tracker.event === 'error') {\n          uri = uri.replace('[ERRORCODE]', errorCode);\n        }\n        this.tracker(uri);\n      }\n    }\n  }\n\n  // Easy to overwrite tracker client for unit testing\n  tracker(uri) {\n    if (typeof window !== 'undefined' && window !== null) {\n      const i = new Image();\n      i.src = uri;\n    }\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (VMAPAdBreak);\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@dailymotion/vmap/src/adbreak.js?");

/***/ }),

/***/ "./node_modules/@dailymotion/vmap/src/adsource.js":
/*!********************************************************!*\
  !*** ./node_modules/@dailymotion/vmap/src/adsource.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass VMAPAdSource {\n  constructor(xml) {\n    this.id = xml.getAttribute('id');\n    this.allowMultipleAds = xml.getAttribute('allowMultipleAds');\n    this.followRedirects = xml.getAttribute('followRedirects');\n    this.vastAdData = null;\n    this.adTagURI = null;\n    this.customData = null;\n\n    for (const nodeKey in xml.childNodes) {\n      const node = xml.childNodes[nodeKey];\n\n      switch (node.localName) {\n        case 'AdTagURI':\n          this.adTagURI = {\n            templateType: node.getAttribute('templateType'),\n            uri: (node.textContent || node.text || '').trim(),\n          };\n          break;\n        case 'VASTAdData':\n          this.vastAdData = node.firstChild;\n          // Some browsers treats empty white-spaces or new lines as text nodes.\n          // Ensure we get the first element node\n          while (this.vastAdData && this.vastAdData.nodeType !== 1) {\n            this.vastAdData = this.vastAdData.nextSibling;\n          }\n          break;\n        case 'CustomAdData':\n          this.customData = node;\n          break;\n      }\n    }\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (VMAPAdSource);\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@dailymotion/vmap/src/adsource.js?");

/***/ }),

/***/ "./node_modules/@dailymotion/vmap/src/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/@dailymotion/vmap/src/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _vmap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vmap */ \"./node_modules/@dailymotion/vmap/src/vmap.js\");\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_vmap__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@dailymotion/vmap/src/index.js?");

/***/ }),

/***/ "./node_modules/@dailymotion/vmap/src/parser_utils.js":
/*!************************************************************!*\
  !*** ./node_modules/@dailymotion/vmap/src/parser_utils.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   childrenByName: () => (/* binding */ childrenByName),\n/* harmony export */   parseNodeValue: () => (/* binding */ parseNodeValue),\n/* harmony export */   parseXMLNode: () => (/* binding */ parseXMLNode)\n/* harmony export */ });\n/**\n * Returns all the elements of the given node which nodeName match the given name.\n * @param  {Node} node - The node to use to find the matches.\n * @param  {String} name - The name to look for.\n * @return {Array<ChildNode>}\n */\nfunction childrenByName(node, name) {\n  const children = [];\n  for (const childKey in node.childNodes) {\n    const child = node.childNodes[childKey];\n\n    if (\n      child.nodeName === name ||\n      name === `vmap:${child.nodeName}` ||\n      child.nodeName === `vmap:${name}`\n    ) {\n      children.push(child);\n    }\n  }\n  return children;\n}\n\n/**\n * Parses a node value giving priority to CDATA as a JSON over text, if CDATA is not a valid JSON it is converted to text\n * @param  {Node} node - The node to parse the value from.\n * @return {String|Object}\n */\nfunction parseNodeValue(node) {\n  if (!node || !node.childNodes) {\n    return {};\n  }\n  const childNodes = node.childNodes;\n\n  // Trying to find and parse CDATA as JSON\n  const cdatas = [];\n  for (const childKey in childNodes) {\n    const childNode = childNodes[childKey];\n\n    if (childNode.nodeName === '#cdata-section') {\n      cdatas.push(childNode);\n    }\n  }\n\n  if (cdatas && cdatas.length > 0) {\n    try {\n      return JSON.parse(cdatas[0].data);\n    } catch (e) {}\n  }\n\n  // Didn't find any CDATA or failed to parse it as JSON\n  let nodeText = '';\n  for (const childKey in childNodes) {\n    const childNode = childNodes[childKey];\n\n    switch (childNode.nodeName) {\n      case '#text':\n        nodeText += childNode.textContent.trim();\n        break;\n      case '#cdata-section':\n        nodeText += childNode.data;\n        break;\n    }\n  }\n  return nodeText;\n}\n\n/**\n * Parses an XML node recursively.\n * @param  {Node} node - The node to parse.\n * @return {Object}\n */\nfunction parseXMLNode(node) {\n  const parsedNode = {\n    attributes: {},\n    children: {},\n    value: {},\n  };\n\n  parsedNode.value = parseNodeValue(node);\n\n  const attributes = node.attributes;\n  if (attributes) {\n    for (const attrKey in attributes) {\n      const nodeAttr = attributes[attrKey];\n\n      if (nodeAttr.nodeName && nodeAttr.nodeValue !== undefined && nodeAttr.nodeValue !== null) {\n        parsedNode.attributes[nodeAttr.nodeName] = nodeAttr.nodeValue;\n      }\n    }\n  }\n\n  const childNodes = node.childNodes;\n  if (childNodes) {\n    for (const childKey in childNodes) {\n      const childNode = childNodes[childKey];\n      if (childNode.nodeName && childNode.nodeName.substring(0, 1) !== '#') {\n        parsedNode.children[childNode.nodeName] = parseXMLNode(childNode);\n      }\n    }\n  }\n\n  return parsedNode;\n}\n\n\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@dailymotion/vmap/src/parser_utils.js?");

/***/ }),

/***/ "./node_modules/@dailymotion/vmap/src/vmap.js":
/*!****************************************************!*\
  !*** ./node_modules/@dailymotion/vmap/src/vmap.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _adbreak__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adbreak */ \"./node_modules/@dailymotion/vmap/src/adbreak.js\");\n/* harmony import */ var _parser_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parser_utils */ \"./node_modules/@dailymotion/vmap/src/parser_utils.js\");\n\n\n\nclass VMAP {\n  constructor(xml) {\n    if (!xml || !xml.documentElement || xml.documentElement.localName !== 'VMAP') {\n      throw new Error('Not a VMAP document');\n    }\n\n    this.version = xml.documentElement.getAttribute('version');\n    this.adBreaks = [];\n    this.extensions = [];\n\n    for (const nodeKey in xml.documentElement.childNodes) {\n      const node = xml.documentElement.childNodes[nodeKey];\n\n      switch (node.localName) {\n        case 'AdBreak':\n          this.adBreaks.push(new _adbreak__WEBPACK_IMPORTED_MODULE_0__[\"default\"](node));\n          break;\n        case 'Extensions':\n          this.extensions = (0,_parser_utils__WEBPACK_IMPORTED_MODULE_1__.childrenByName)(node, 'Extension').map((extension) =>\n            (0,_parser_utils__WEBPACK_IMPORTED_MODULE_1__.parseXMLNode)(extension)\n          );\n          break;\n      }\n    }\n  }\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (VMAP);\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@dailymotion/vmap/src/vmap.js?");

/***/ }),

/***/ "./node_modules/@eyevinn/csai-manager/dist/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@eyevinn/csai-manager/dist/index.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var $g5Y9E$eyevinnvideoeventfilter = __webpack_require__(/*! @eyevinn/video-event-filter */ \"./node_modules/@eyevinn/video-event-filter/dist/index.js\");\nvar $g5Y9E$dailymotionvastclient = __webpack_require__(/*! @dailymotion/vast-client */ \"./node_modules/@dailymotion/vast-client/dist/vast-client.min.js\");\nvar $g5Y9E$dailymotionvmap = __webpack_require__(/*! @dailymotion/vmap */ \"./node_modules/@dailymotion/vmap/src/index.js\");\nvar $g5Y9E$mitt = __webpack_require__(/*! mitt */ \"./node_modules/mitt/dist/mitt.mjs\");\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      }\n    });\n  });\n\n  return dest;\n}\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\n$parcel$export(module.exports, \"AdBreakTrackingEvent\", () => $6a91d1a6b96ec270$export$8ee40f6ae4909ee9);\n$parcel$export(module.exports, \"AdTrackingEvent\", () => $6a91d1a6b96ec270$export$af003d03c08e493d);\nvar $020ad56d15653aeb$exports = {};\n\n$parcel$export($020ad56d15653aeb$exports, \"CSAIManager\", () => $020ad56d15653aeb$export$b74fc88014c397b3, (v) => $020ad56d15653aeb$export$b74fc88014c397b3 = v);\nvar $82676b94e7d3e1ec$exports = {};\n\n$parcel$export($82676b94e7d3e1ec$exports, \"AdServerService\", () => $82676b94e7d3e1ec$export$3352be5704672342, (v) => $82676b94e7d3e1ec$export$3352be5704672342 = v);\n\n\nvar $6a91d1a6b96ec270$export$af003d03c08e493d;\n(function($6a91d1a6b96ec270$export$af003d03c08e493d) {\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"START\"] = \"start\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"IMPRESSION\"] = \"impression\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"EXPAND\"] = \"expand\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"MUTE\"] = \"mute\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"UNMUTE\"] = \"unmute\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"PAUSE\"] = \"pause\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"RESUME\"] = \"resume\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"REWIND\"] = \"rewind\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"CLOSE\"] = \"close\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"COMPLETE\"] = \"complete\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"FIRST_QUARTILE\"] = \"firstQuartile\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"MIDPOINT\"] = \"midpoint\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"THIRD_QUARTILE\"] = \"thirdQuartile\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"CLICK_THROUGH\"] = \"clickThrough\";\n    $6a91d1a6b96ec270$export$af003d03c08e493d[\"ERROR\"] = \"error\";\n})($6a91d1a6b96ec270$export$af003d03c08e493d || ($6a91d1a6b96ec270$export$af003d03c08e493d = {}));\nvar $6a91d1a6b96ec270$export$8ee40f6ae4909ee9;\n(function($6a91d1a6b96ec270$export$8ee40f6ae4909ee9) {\n    $6a91d1a6b96ec270$export$8ee40f6ae4909ee9[\"BREAK_START\"] = \"breakStart\";\n    $6a91d1a6b96ec270$export$8ee40f6ae4909ee9[\"BREAK_END\"] = \"breakEnd\";\n})($6a91d1a6b96ec270$export$8ee40f6ae4909ee9 || ($6a91d1a6b96ec270$export$8ee40f6ae4909ee9 = {}));\nvar $6a91d1a6b96ec270$export$f9cba49277c3a748;\n(function($6a91d1a6b96ec270$export$f9cba49277c3a748) {\n    $6a91d1a6b96ec270$export$f9cba49277c3a748[\"ClientSide\"] = \"csai\";\n    $6a91d1a6b96ec270$export$f9cba49277c3a748[\"ServerSide\"] = \"ssai\";\n})($6a91d1a6b96ec270$export$f9cba49277c3a748 || ($6a91d1a6b96ec270$export$f9cba49277c3a748 = {}));\nvar $6a91d1a6b96ec270$export$21ab339cd8e953dc;\n(function($6a91d1a6b96ec270$export$21ab339cd8e953dc) {\n    $6a91d1a6b96ec270$export$21ab339cd8e953dc[\"Preroll\"] = \"preroll\";\n    $6a91d1a6b96ec270$export$21ab339cd8e953dc[\"Midroll\"] = \"midroll\";\n    $6a91d1a6b96ec270$export$21ab339cd8e953dc[\"Postroll\"] = \"postroll\";\n})($6a91d1a6b96ec270$export$21ab339cd8e953dc || ($6a91d1a6b96ec270$export$21ab339cd8e953dc = {}));\nvar $6a91d1a6b96ec270$export$3d6415b1a42429de;\n(function($6a91d1a6b96ec270$export$3d6415b1a42429de) {\n    $6a91d1a6b96ec270$export$3d6415b1a42429de[\"NORMAL\"] = \"NORMAL\";\n    $6a91d1a6b96ec270$export$3d6415b1a42429de[\"SPONSOR\"] = \"BUMPER\";\n    $6a91d1a6b96ec270$export$3d6415b1a42429de[\"VIGNETTE\"] = \"VIGNETTE\";\n    $6a91d1a6b96ec270$export$3d6415b1a42429de[\"TRAILER\"] = \"TRAILER\";\n})($6a91d1a6b96ec270$export$3d6415b1a42429de || ($6a91d1a6b96ec270$export$3d6415b1a42429de = {}));\nvar $6a91d1a6b96ec270$export$66a223aa8aa4adc3 = {\n    id: \"unknown_advert\",\n    title: \"\",\n    creative: {\n        id: \"unknown_creative\",\n        type: \"?\",\n        mediafiles: [],\n        trackingEvents: {}\n    }\n};\n\n\nfunction $c2c23ffc2593fda7$export$7d60f72cc3d90ae5(dateString) {\n    var p = dateString.split(\":\"), s = 0, m = 1;\n    while(p.length > 0){\n        s += m * parseInt(p.pop(), 10);\n        m *= 60;\n    }\n    return s;\n}\nfunction $c2c23ffc2593fda7$export$ff9d762dbf7e2cc6(contentVideoElement) {\n    var adVideoElement = document.createElement(\"video\");\n    adVideoElement.style.position = \"absolute\";\n    adVideoElement.style.top = \"0\";\n    adVideoElement.style.left = \"0\";\n    adVideoElement.style.width = \"100%\";\n    adVideoElement.style.height = \"100%\";\n    adVideoElement.style.backgroundColor = \"black\";\n    adVideoElement.style.display = \"none\";\n    if (contentVideoElement) {\n        adVideoElement.playsInline = contentVideoElement.playsInline;\n        adVideoElement.muted = contentVideoElement.muted;\n        adVideoElement.volume = contentVideoElement.volume;\n    }\n    return adVideoElement;\n}\n\n\nvar $82676b94e7d3e1ec$var$__assign =  false || function() {\n    $82676b94e7d3e1ec$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $82676b94e7d3e1ec$var$__assign.apply(this, arguments);\n};\nvar $82676b94e7d3e1ec$var$__awaiter =  false || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar $82676b94e7d3e1ec$var$__generator =  false || function(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g;\n    return g = {\n        next: verb(0),\n        \"throw\": verb(1),\n        \"return\": verb(2)\n    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(_)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n};\nvar $82676b94e7d3e1ec$var$__spreadArray =  false || function(to, from, pack) {\n    if (pack || arguments.length === 2) {\n        for(var i = 0, l = from.length, ar; i < l; i++)if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar $82676b94e7d3e1ec$export$3352be5704672342 = /** @class */ function() {\n    function $82676b94e7d3e1ec$export$3352be5704672342(debug) {\n        if (debug === void 0) debug = false;\n        this.debug = false;\n        this.estimatedBandwidth = 500;\n        this.debug = !!debug;\n        this.vastParser = new $g5Y9E$dailymotionvastclient.VASTParser();\n    }\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.getVMAP = function(url) {\n        return $82676b94e7d3e1ec$var$__awaiter(this, void 0, Promise, function() {\n            var vmapObject, adBreaks;\n            return $82676b94e7d3e1ec$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        if (this.debug) console.debug(\"[CSAIManager] getVMAP\", url);\n                        return [\n                            4 /*yield*/ ,\n                            this.fetchAdsVMAP(url)\n                        ];\n                    case 1:\n                        vmapObject = _a.sent();\n                        return [\n                            4 /*yield*/ ,\n                            this.resolveAds(vmapObject)\n                        ];\n                    case 2:\n                        adBreaks = _a.sent();\n                        if (this.debug) console.debug(\"[CSAIManager] resolved VMAP to ad breaks\", adBreaks);\n                        return [\n                            2 /*return*/ ,\n                            adBreaks\n                        ];\n                }\n            });\n        });\n    };\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.getVASTs = function(vastItems) {\n        return $82676b94e7d3e1ec$var$__awaiter(this, void 0, Promise, function() {\n            var adBreaks, _i, vastItems_1, vastItem, vastAdBreak, adBreakAds;\n            return $82676b94e7d3e1ec$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        if (this.debug) console.debug(\"[CSAIManager] getVASTs\", vastItems);\n                        adBreaks = [];\n                        _i = 0, vastItems_1 = vastItems;\n                        _a.label = 1;\n                    case 1:\n                        if (!(_i < vastItems_1.length)) return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                        vastItem = vastItems_1[_i];\n                        return [\n                            4 /*yield*/ ,\n                            this.vastParser.getAndParseVAST(vastItem.vastUrl)\n                        ];\n                    case 2:\n                        vastAdBreak = _a.sent();\n                        if (!vastAdBreak) return [\n                            2 /*return*/ \n                        ];\n                        adBreakAds = vastAdBreak.ads;\n                        adBreaks.push(this.mapAdBreakObject({\n                            timeOffset: vastItem.timeOffset.toString()\n                        }, adBreakAds));\n                        _a.label = 3;\n                    case 3:\n                        _i++;\n                        return [\n                            3 /*break*/ ,\n                            1\n                        ];\n                    case 4:\n                        if (this.debug) console.debug(\"[CSAIManager] resolved VAST to ad break\", adBreaks);\n                        return [\n                            2 /*return*/ ,\n                            adBreaks\n                        ];\n                }\n            });\n        });\n    };\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.getVast = function(vastUrl) {\n        return $82676b94e7d3e1ec$var$__awaiter(this, void 0, Promise, function() {\n            var vastAdBreak, adBreakAds, adbreak;\n            return $82676b94e7d3e1ec$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        if (this.debug) console.debug(\"[CSAIManager] get vast\", vastUrl);\n                        return [\n                            4 /*yield*/ ,\n                            this.vastParser.getAndParseVAST(vastUrl)\n                        ];\n                    case 1:\n                        vastAdBreak = _a.sent();\n                        if (!vastAdBreak) return [\n                            2 /*return*/ \n                        ];\n                        adBreakAds = vastAdBreak.ads;\n                        adbreak = this.mapAdBreakObject({\n                            timeOffset: \"100\"\n                        }, adBreakAds);\n                        if (this.debug) console.debug(\"[CSAIManager] resolved vast to ad break\", adbreak);\n                        return [\n                            2 /*return*/ ,\n                            adbreak\n                        ];\n                }\n            });\n        });\n    };\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.fetchAdsVMAP = function(u) {\n        return $82676b94e7d3e1ec$var$__awaiter(this, void 0, Promise, function() {\n            var response, xml, xmlParser, xmlDoc, vmapObject;\n            return $82676b94e7d3e1ec$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        return [\n                            4 /*yield*/ ,\n                            fetch(u)\n                        ];\n                    case 1:\n                        response = _a.sent();\n                        return [\n                            4 /*yield*/ ,\n                            response.text()\n                        ];\n                    case 2:\n                        xml = _a.sent();\n                        xmlParser = new DOMParser();\n                        xmlDoc = xmlParser.parseFromString(xml, \"text/xml\");\n                        vmapObject = new ($parcel$interopDefault($g5Y9E$dailymotionvmap))(xmlDoc);\n                        return [\n                            2 /*return*/ ,\n                            vmapObject\n                        ];\n                }\n            });\n        });\n    };\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.resolveAds = function(vmapObject) {\n        var _a;\n        return $82676b94e7d3e1ec$var$__awaiter(this, void 0, Promise, function() {\n            var adBreaks, _i, _b, adBreak, adsInBreak, adBreakAds, options;\n            return $82676b94e7d3e1ec$var$__generator(this, function(_c) {\n                switch(_c.label){\n                    case 0:\n                        adBreaks = [];\n                        _i = 0, _b = vmapObject.adBreaks;\n                        _c.label = 1;\n                    case 1:\n                        if (!(_i < _b.length)) return [\n                            3 /*break*/ ,\n                            5\n                        ];\n                        adBreak = _b[_i];\n                        if (adBreak.breakType !== \"linear\") return [\n                            2 /*return*/ ,\n                            adBreaks\n                        ];\n                        adsInBreak = (_a = adBreak.adSource) === null || _a === void 0 ? void 0 : _a.vastAdData;\n                        adBreakAds = [];\n                        if (!adsInBreak) return [\n                            3 /*break*/ ,\n                            3\n                        ];\n                        options = {\n                            isRootVAST: true,\n                            timeout: 10000,\n                            withCredentials: true,\n                            wrapperLimit: 10,\n                            followAdditionalWrappers: true\n                        };\n                        this.vastParser.initParsingStatus(options);\n                        return [\n                            4 /*yield*/ ,\n                            this.vastParser.parseVAST({\n                                documentElement: adsInBreak\n                            }, options)\n                        ];\n                    case 2:\n                        adBreakAds = _c.sent().ads;\n                        this.estimatedBandwidth = this.vastParser.getEstimatedBitrate();\n                        _c.label = 3;\n                    case 3:\n                        adBreaks.push(this.mapAdBreakObject(adBreak, adBreakAds));\n                        _c.label = 4;\n                    case 4:\n                        _i++;\n                        return [\n                            3 /*break*/ ,\n                            1\n                        ];\n                    case 5:\n                        return [\n                            2 /*return*/ ,\n                            adBreaks\n                        ];\n                }\n            });\n        });\n    };\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.mapAdBreakObject = function(adBreak, ads) {\n        var _this = this;\n        var _a, _b, _c, _d;\n        var adBreakObject = {\n            insertionType: $6a91d1a6b96ec270$export$f9cba49277c3a748.ClientSide,\n            breakType: adBreak.timeOffset === \"start\" || adBreak.timeOffset === \"0\" ? $6a91d1a6b96ec270$export$21ab339cd8e953dc.Preroll : $6a91d1a6b96ec270$export$21ab339cd8e953dc.Midroll,\n            timeOffset: adBreak.timeOffset === \"start\" || adBreak.timeOffset === \"0\" ? 0 : $c2c23ffc2593fda7$export$7d60f72cc3d90ae5(adBreak.timeOffset),\n            ads: ads === null || ads === void 0 ? void 0 : ads.map(function(ad) {\n                return _this.mapAdsObject(ad);\n            }).filter(function(ad) {\n                return ad !== null;\n            }),\n            trackingEvents: {\n                breakStart: ((_b = (_a = adBreak.trackingEvents) === null || _a === void 0 ? void 0 : _a.filter(function(abte) {\n                    return abte.event === $6a91d1a6b96ec270$export$8ee40f6ae4909ee9.BREAK_START;\n                })) === null || _b === void 0 ? void 0 : _b.map(function(abte) {\n                    return abte.uri;\n                })) || [],\n                breakEnd: ((_d = (_c = adBreak.trackingEvents) === null || _c === void 0 ? void 0 : _c.filter(function(abte) {\n                    return abte.event === $6a91d1a6b96ec270$export$8ee40f6ae4909ee9.BREAK_END;\n                })) === null || _d === void 0 ? void 0 : _d.map(function(abte) {\n                    return abte.uri;\n                })) || []\n            }\n        };\n        return adBreakObject;\n    };\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.mapAdsObject = function(ad) {\n        var _this = this;\n        var _a, _b, _c, _d, _e;\n        var adServerExtension = ad.extensions.find(function(extension) {\n            return extension.attributes.type === \"AdServer\";\n        });\n        var customAdId = ((_b = (_a = adServerExtension === null || adServerExtension === void 0 ? void 0 : adServerExtension.children.find(function(ext) {\n            return ext.name === \"AdInfo\";\n        })) === null || _a === void 0 ? void 0 : _a.attributes) === null || _b === void 0 ? void 0 : _b.customaid) || undefined;\n        var variant = ((_d = (_c = adServerExtension === null || adServerExtension === void 0 ? void 0 : adServerExtension.children.find(function(ext) {\n            return ext.name === \"AdInfo\";\n        })) === null || _c === void 0 ? void 0 : _c.attributes) === null || _d === void 0 ? void 0 : _d.variant) || $6a91d1a6b96ec270$export$3d6415b1a42429de.NORMAL;\n        var creative1 = this.findCreative(ad.creatives.map(function(creative) {\n            return _this.mapCreativeObject(creative);\n        }));\n        if (!creative1) return null;\n        var adObject = {\n            id: ad.id,\n            customAdId: customAdId,\n            programmatic: customAdId === \"PROGRAMMATIC\",\n            system: (_e = ad.system) === null || _e === void 0 ? void 0 : _e.value,\n            sequence: ad.sequence,\n            title: ad.title,\n            variant: variant,\n            creative: creative1,\n            errorUrlTemplates: ad.errorURLTemplates,\n            impressionUrlTemplates: ad.impressionURLTemplates.map(function(impressionUrlTemplate) {\n                return impressionUrlTemplate.url;\n            })\n        };\n        return adObject;\n    };\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.findCreative = function(creatives) {\n        return creatives.find(function(creative) {\n            return creative.type === \"linear\" && creative.mediafiles.length > 0;\n        });\n    };\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.mapCreativeObject = function(creative) {\n        var _a;\n        var _this = this;\n        var creativeObject = {\n            id: creative.id,\n            adId: creative.adId,\n            type: creative.type,\n            duration: creative.duration,\n            mediafiles: this.filterMediaFiles(creative.mediaFiles.map(function(mediaFile) {\n                return _this.mapMediaFileObject(mediaFile);\n            })),\n            trackingEvents: $82676b94e7d3e1ec$var$__assign((_a = {}, _a[$6a91d1a6b96ec270$export$af003d03c08e493d.CLICK_THROUGH] = $82676b94e7d3e1ec$var$__spreadArray([], creative.videoClickTrackingURLTemplates, true), _a), creative.trackingEvents),\n            clickThroughUrlTemplate: creative.videoClickThroughURLTemplate\n        };\n        return creativeObject;\n    };\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.filterMediaFiles = function(mediaFiles) {\n        var _this = this;\n        var playableMediaFiles = mediaFiles.filter(function(mediaFile) {\n            return mediaFile.mimeType === \"video/mp4\";\n        });\n        var files = playableMediaFiles.filter(function(mediaFile) {\n            return mediaFile.mimeType === \"video/mp4\" && mediaFile.fileUrl.length > 0 && (!mediaFile.bitrate || mediaFile.bitrate < _this.estimatedBandwidth);\n        });\n        // if no files are found, return the lowest one\n        if (files.length === 0) files = playableMediaFiles;\n        // otherwise return the filtered list top down\n        return files.sort(function(a, b) {\n            return a.bitrate && b.bitrate ? a.bitrate - b.bitrate : 0;\n        });\n    };\n    $82676b94e7d3e1ec$export$3352be5704672342.prototype.mapMediaFileObject = function(mediaFile) {\n        var mediaFileObject = {\n            id: mediaFile.id,\n            mimeType: mediaFile.mimeType,\n            fileUrl: mediaFile.fileURL,\n            bitrate: mediaFile.bitrate,\n            height: mediaFile.height,\n            width: mediaFile.width\n        };\n        return mediaFileObject;\n    };\n    return $82676b94e7d3e1ec$export$3352be5704672342;\n}();\n\n\n\n\nvar $cc312ea0fc7c8651$export$691d3e4b1045a188 = /** @class */ function() {\n    function $cc312ea0fc7c8651$export$691d3e4b1045a188() {\n        this.emitter = ($parcel$interopDefault($g5Y9E$mitt))();\n    }\n    $cc312ea0fc7c8651$export$691d3e4b1045a188.prototype.on = function(event, handler) {\n        this.emitter.on.apply(this, [\n            event,\n            handler\n        ]);\n    };\n    $cc312ea0fc7c8651$export$691d3e4b1045a188.prototype.off = function(event, handler) {\n        if (this.emitter) this.emitter.off.apply(this, [\n            event,\n            handler\n        ]);\n    };\n    $cc312ea0fc7c8651$export$691d3e4b1045a188.prototype.clear = function() {\n        this.emitter.all.clear();\n    };\n    $cc312ea0fc7c8651$export$691d3e4b1045a188.prototype.emit = function(event, data) {\n        if (this.emitter) this.emitter.emit.apply(this, [\n            event,\n            data\n        ]);\n    };\n    return $cc312ea0fc7c8651$export$691d3e4b1045a188;\n}();\n\n\n\nfunction $e68d46ff2e90f1a5$export$d2858fcef9c76970(initOptions) {\n    var _a;\n    if (!initOptions.container && !initOptions.adVideoElement) {\n        console.warn(\"[CSAIManager] container or adVideoElement is expected, choosing the parent of contentVideoElement as container\");\n        initOptions.container = initOptions.contentVideoElement.parentElement;\n    }\n    if (initOptions.container && initOptions.adVideoElement) {\n        console.warn(\"[CSAIManager] either container or adVideoElement is expected, not both, choosing the adVideoElement\");\n        delete initOptions.container;\n    }\n    if (!initOptions.isLive && !initOptions.vmapUrl && !initOptions.adBreakVASTList) console.error(\"[CSAIManager] vmapUrl or adBreakVASTList is required\");\n    if (initOptions.vmapUrl && initOptions.adBreakVASTList) {\n        console.warn(\"[CSAIManager] either vmapUrl or adBreakVASTList is expected, not both, choosing the adBreakVASTList\");\n        delete initOptions.vmapUrl;\n    }\n    if (initOptions.isLive && (initOptions.vmapUrl || ((_a = initOptions.adBreakVASTList) === null || _a === void 0 ? void 0 : _a.length) > 1)) console.warn(\"[CSAIManager] isLive is true, vmapUrl and adBreakVASTList are not expected, ignoring them\");\n    return initOptions;\n}\n\n\n\nvar $020ad56d15653aeb$var$__extends =  false || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $020ad56d15653aeb$var$__awaiter =  false || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar $020ad56d15653aeb$var$__generator =  false || function(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g;\n    return g = {\n        next: verb(0),\n        \"throw\": verb(1),\n        \"return\": verb(2)\n    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(_)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n};\nvar $020ad56d15653aeb$export$b74fc88014c397b3 = /** @class */ function(_super) {\n    $020ad56d15653aeb$var$__extends($020ad56d15653aeb$export$b74fc88014c397b3, _super);\n    function $020ad56d15653aeb$export$b74fc88014c397b3(initOptions) {\n        var _this = _super.call(this) || this;\n        _this.debug = false;\n        _this.autoManagePlayback = true;\n        _this.adBreaks = [];\n        _this.adMarkers = [];\n        _this.currentAdBreakVideos = [];\n        _this.validCurrentTime = 0;\n        _this.trackedAdBreaks = {};\n        _this.trackedAds = {};\n        _this.debug = !!initOptions.debug;\n        _this.initOptions = initOptions;\n        _this.state = \"idle\";\n        _this.adServerService = new $82676b94e7d3e1ec$exports.AdServerService(_this.debug);\n        initOptions = $e68d46ff2e90f1a5$export$d2858fcef9c76970(initOptions);\n        if (_this.autoManagePlayback) initOptions.contentVideoElement.pause();\n        _this.contentVideoElement = initOptions.contentVideoElement;\n        _this.adVideoElement = _this.setupAdVideoElement(initOptions);\n        _this.videoEventFilter = new $g5Y9E$eyevinnvideoeventfilter.VideoEventFilter(_this.adVideoElement);\n        _this.autoManagePlayback = initOptions.autoManagePlayback ? initOptions.autoManagePlayback : true;\n        _this.fetchAds(initOptions);\n        return _this;\n    }\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.setupAdVideoElement = function(initOptions) {\n        if (initOptions.adVideoElement) return initOptions.adVideoElement;\n        if (initOptions.container) {\n            var adVideoElement = $c2c23ffc2593fda7$export$ff9d762dbf7e2cc6(this.contentVideoElement);\n            initOptions.container.appendChild(adVideoElement);\n            return adVideoElement;\n        }\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.fetchAds = function(initOptions) {\n        var _a;\n        return $020ad56d15653aeb$var$__awaiter(this, void 0, Promise, function() {\n            var _b, _c;\n            return $020ad56d15653aeb$var$__generator(this, function(_d) {\n                switch(_d.label){\n                    case 0:\n                        if (initOptions.isLive && ((_a = initOptions.adBreakVASTList) === null || _a === void 0 ? void 0 : _a.length) > 1) return [\n                            2 /*return*/ \n                        ];\n                        if (!initOptions.vmapUrl) return [\n                            3 /*break*/ ,\n                            2\n                        ];\n                        _b = this;\n                        return [\n                            4 /*yield*/ ,\n                            this.adServerService.getVMAP(initOptions.vmapUrl)\n                        ];\n                    case 1:\n                        _b.adBreaks = _d.sent();\n                        _d.label = 2;\n                    case 2:\n                        if (!initOptions.adBreakVASTList) return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                        _c = this;\n                        return [\n                            4 /*yield*/ ,\n                            this.adServerService.getVASTs(initOptions.adBreakVASTList)\n                        ];\n                    case 3:\n                        _c.adBreaks = _d.sent();\n                        _d.label = 4;\n                    case 4:\n                        this.adBreaks = this.adBreaks.sort(function(a, b) {\n                            return a.timeOffset - b.timeOffset;\n                        });\n                        this.adMarkers = this.adBreaks.map(function(adBreak) {\n                            return adBreak.timeOffset;\n                        });\n                        this.start();\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.play = function() {\n        if (this.state !== \"idle\") return;\n        this.state = \"playing\";\n        this.playNextVideo();\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.fetchAdBreak = function(vastUrl) {\n        return $020ad56d15653aeb$var$__awaiter(this, void 0, Promise, function() {\n            var adBreak;\n            return $020ad56d15653aeb$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        return [\n                            4 /*yield*/ ,\n                            this.adServerService.getVast(vastUrl)\n                        ];\n                    case 1:\n                        adBreak = _a.sent();\n                        if (adBreak) this.adBreaks.push(adBreak);\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.triggerAdBreak = function() {\n        return $020ad56d15653aeb$var$__awaiter(this, void 0, Promise, function() {\n            return $020ad56d15653aeb$var$__generator(this, function(_a) {\n                if (!this.adBreaks || this.adBreaks.length === 0) return [\n                    2 /*return*/ \n                ];\n                this.playAdBreak(this.adBreaks.shift());\n                return [\n                    2 /*return*/ \n                ];\n            });\n        });\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.start = function() {\n        var _this = this;\n        if (this.adMarkers[0] === 0) {\n            this.adMarkers.shift();\n            this.playAdBreak(this.adBreaks.shift());\n        } else {\n            var nextBreak = this.adMarkers.find(function(adMarker) {\n                return adMarker > _this.contentVideoElement.currentTime;\n            });\n            if (!nextBreak) return;\n            this.contentVideoElement.addEventListener(\"timeupdate\", this.onContentTimeUpdateRef = this.onContentTimeUpdate.bind(this));\n        }\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.playAdBreak = function(adbreak) {\n        if (this.autoManagePlayback) this.contentVideoElement.pause();\n        this.currentAdBreak = adbreak;\n        this.trackAdBreakEvent(this.currentAdBreak, $6a91d1a6b96ec270$export$8ee40f6ae4909ee9.BREAK_START);\n        for(var _i = 0, _a = adbreak.ads; _i < _a.length; _i++){\n            var ad = _a[_i];\n            this.currentAdBreakVideos.push(ad);\n        }\n        this.playNextVideo();\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.playNextVideo = function() {\n        this.videoEventFilter.clear();\n        this.adVideoElement.removeEventListener(\"seeking\", this.onAdSeekingRef);\n        var ad = this.currentAdBreakVideos.shift();\n        if (ad) this.playAd(ad);\n        else this.playContent();\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.playAd = function(ad) {\n        var _this = this;\n        var src = ad.creative.mediafiles[0].fileUrl;\n        if (this.debug) console.debug(\"[CSAIManager] play ad\", ad);\n        if (!src) return this.playNextVideo();\n        this.currentAd = ad;\n        this.adVideoElement.style.display = \"block\";\n        this.adVideoElement.src = src;\n        if (this.state !== \"idle\" || this.initOptions.autoplay) this.adVideoElement.play();\n        this.adVideoElement.addEventListener(\"playing\", function() {\n            _this.trackEvent($6a91d1a6b96ec270$export$af003d03c08e493d.START, _this.currentAd);\n            _this.trackEvent($6a91d1a6b96ec270$export$af003d03c08e493d.IMPRESSION, _this.currentAd);\n            _this.state = \"playing\";\n        }, {\n            once: true\n        });\n        this.adVideoElement.addEventListener(\"ended\", function() {\n            _this.trackEvent($6a91d1a6b96ec270$export$af003d03c08e493d.COMPLETE, _this.currentAd);\n            _this.state = \"ended\";\n            _this.validCurrentTime = 0;\n            _this.playNextVideo();\n        }, {\n            once: true\n        });\n        this.videoEventFilter.addEventListener($g5Y9E$eyevinnvideoeventfilter.PlayerEvents.TimeUpdate, function() {\n            if (!_this.adVideoElement.seeking) _this.validCurrentTime = _this.adVideoElement.currentTime;\n            _this.monitorProgress();\n        });\n        this.videoEventFilter.addEventListener($g5Y9E$eyevinnvideoeventfilter.PlayerEvents.Pause, function() {\n            _this.trackEvent($6a91d1a6b96ec270$export$af003d03c08e493d.PAUSE, _this.currentAd);\n        });\n        this.videoEventFilter.addEventListener($g5Y9E$eyevinnvideoeventfilter.PlayerEvents.Resume, function() {\n            _this.trackEvent($6a91d1a6b96ec270$export$af003d03c08e493d.RESUME, _this.currentAd);\n        });\n        this.videoEventFilter.addEventListener($g5Y9E$eyevinnvideoeventfilter.PlayerEvents.Error, function() {\n            _this.trackEvent($6a91d1a6b96ec270$export$af003d03c08e493d.ERROR, _this.currentAd);\n        });\n        // this has to be native to block seek properly\n        this.adVideoElement.addEventListener(\"seeking\", this.onAdSeekingRef = function() {\n            var delta = _this.adVideoElement.currentTime - _this.validCurrentTime;\n            if (Math.abs(delta) > 0.01) _this.adVideoElement.currentTime = _this.validCurrentTime;\n        });\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.playContent = function() {\n        var _this = this;\n        if (this.debug) console.debug(\"[CSAIManager] play content\");\n        this.adVideoElement.style.display = \"none\";\n        this.adVideoElement.src = \"\";\n        if (this.currentAdBreak) {\n            this.trackAdBreakEvent(this.currentAdBreak, $6a91d1a6b96ec270$export$8ee40f6ae4909ee9.BREAK_END);\n            this.currentAdBreak = null;\n        }\n        if (this.autoManagePlayback) this.contentVideoElement.play();\n        var nextBreak = this.adMarkers.find(function(adMarker) {\n            return adMarker > _this.contentVideoElement.currentTime;\n        });\n        if (!nextBreak) return;\n        if (this.debug) console.debug(\"[CSAIManager] waiting for next break\", nextBreak);\n        this.contentVideoElement.addEventListener(\"timeupdate\", this.onContentTimeUpdateRef = this.onContentTimeUpdate.bind(this));\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.onContentTimeUpdate = function() {\n        var currentTime = this.contentVideoElement.currentTime;\n        var nextBreak = this.adMarkers[0];\n        if (currentTime > nextBreak) {\n            this.contentVideoElement.removeEventListener(\"timeupdate\", this.onContentTimeUpdateRef);\n            this.adMarkers.shift();\n            this.playAdBreak(this.adBreaks.shift());\n        }\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.monitorProgress = function() {\n        var _this = this;\n        var currentTime = this.adVideoElement.currentTime;\n        var duration = this.adVideoElement.duration;\n        if (!this.currentAd) return;\n        var remainingTime = duration - currentTime;\n        var percentWatched = Math.round(100 - 100 * remainingTime / duration);\n        var TrackingCuePoints = {\n            25: $6a91d1a6b96ec270$export$af003d03c08e493d.FIRST_QUARTILE,\n            50: $6a91d1a6b96ec270$export$af003d03c08e493d.MIDPOINT,\n            75: $6a91d1a6b96ec270$export$af003d03c08e493d.THIRD_QUARTILE\n        };\n        Object.keys(TrackingCuePoints).map(function(value) {\n            var event = TrackingCuePoints[value];\n            if (percentWatched > parseInt(value, 10) && _this.currentAd) _this.trackEvent(event, _this.currentAd);\n        });\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.trackAdBreakEvent = function(adBreak, trackingEvent) {\n        var _this = this;\n        if (!adBreak || !adBreak.trackingEvents || !trackingEvent || this.trackedAdBreaks[adBreak.timeOffset] && this.trackedAdBreaks[adBreak.timeOffset][trackingEvent] === true) return;\n        if (!this.trackedAdBreaks[adBreak.timeOffset]) this.trackedAdBreaks[adBreak.timeOffset] = {};\n        this.emit(trackingEvent, adBreak);\n        var trackingUrls = adBreak.trackingEvents[trackingEvent] || [];\n        trackingUrls.forEach(function(url) {\n            return $020ad56d15653aeb$var$__awaiter(_this, void 0, void 0, function() {\n                return $020ad56d15653aeb$var$__generator(this, function(_a) {\n                    if (this.debug) console.debug(\"[CSAIManager] ad break tracking event -> \".concat(trackingEvent), url);\n                    new Image().src = url;\n                    return [\n                        2 /*return*/ \n                    ];\n                });\n            });\n        });\n        this.trackedAdBreaks[adBreak.timeOffset][trackingEvent] = true;\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.trackEvent = function(trackingEvent, ad) {\n        var _this = this;\n        if (!ad || !trackingEvent || this.trackedAds[ad.id] && this.trackedAds[ad.id][trackingEvent] === true) return;\n        if (!this.trackedAds[ad.id]) this.trackedAds[ad.id] = {};\n        var trackingUrls = [];\n        switch(trackingEvent){\n            case $6a91d1a6b96ec270$export$af003d03c08e493d.IMPRESSION:\n                trackingUrls = ad.impressionUrlTemplates || [];\n                break;\n            case $6a91d1a6b96ec270$export$af003d03c08e493d.ERROR:\n                trackingUrls = ad.errorUrlTemplates || [];\n                break;\n            default:\n                trackingUrls = ad.creative.trackingEvents[trackingEvent] || [];\n                break;\n        }\n        this.emit(trackingEvent, ad);\n        trackingUrls === null || trackingUrls === void 0 || trackingUrls.forEach(function(url) {\n            return $020ad56d15653aeb$var$__awaiter(_this, void 0, void 0, function() {\n                return $020ad56d15653aeb$var$__generator(this, function(_a) {\n                    if (this.debug) console.debug(\"[CSAIManager] ad tracking event -> \".concat(trackingEvent), url);\n                    new Image().src = url;\n                    return [\n                        2 /*return*/ \n                    ];\n                });\n            });\n        });\n        this.trackedAds[ad.id][trackingEvent] = true;\n    };\n    $020ad56d15653aeb$export$b74fc88014c397b3.prototype.destroy = function() {\n        this.adBreaks = [];\n        this.adMarkers = [];\n        this.currentAd = null;\n        this.currentAdBreak = null;\n        this.currentAdBreakVideos = [];\n        this.onContentTimeUpdateRef = null;\n        this.onAdSeekingRef = null;\n        this.trackedAdBreaks = {};\n        this.trackedAds = {};\n        this.videoEventFilter.clear();\n        this.videoEventFilter.destroy();\n        // if not sent in as a video element already in DOM, let's remove the created ad video element as well\n        if (!this.initOptions.adVideoElement) this.adVideoElement.remove();\n    };\n    return $020ad56d15653aeb$export$b74fc88014c397b3;\n}($cc312ea0fc7c8651$export$691d3e4b1045a188);\n\n\n\n$parcel$exportWildcard(module.exports, $020ad56d15653aeb$exports);\n\n\n//# sourceMappingURL=index.js.map\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@eyevinn/csai-manager/dist/index.js?");

/***/ }),

/***/ "./node_modules/@eyevinn/video-event-filter/dist/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@eyevinn/video-event-filter/dist/index.js ***!
  \****************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var $g5Y9E$mitt = __webpack_require__(/*! mitt */ \"./node_modules/@eyevinn/video-event-filter/node_modules/mitt/dist/mitt.es.js\");\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\n$parcel$export(module.exports, \"VideoEventFilter\", () => $fcdb6cf3608c4662$exports.VideoEventFilter);\n$parcel$export(module.exports, \"PlayerEvents\", () => $fcdb6cf3608c4662$exports.PlayerEvents);\n$parcel$export(module.exports, \"PlayerState\", () => $fcdb6cf3608c4662$exports.PlayerState);\nvar $fcdb6cf3608c4662$exports = {};\n\n$parcel$export($fcdb6cf3608c4662$exports, \"PlayerState\", () => $fcdb6cf3608c4662$export$e3425b961a6a8509, (v) => $fcdb6cf3608c4662$export$e3425b961a6a8509 = v);\n$parcel$export($fcdb6cf3608c4662$exports, \"PlayerEvents\", () => $fcdb6cf3608c4662$export$5013cbcdb4d9878b, (v) => $fcdb6cf3608c4662$export$5013cbcdb4d9878b = v);\n$parcel$export($fcdb6cf3608c4662$exports, \"VideoEventFilter\", () => $fcdb6cf3608c4662$export$68ce463a75cf738d, (v) => $fcdb6cf3608c4662$export$68ce463a75cf738d = v);\n\nvar $516c8d13080d4552$export$691d3e4b1045a188 = function() {\n    function $516c8d13080d4552$export$691d3e4b1045a188() {\n        this.emitter = ($parcel$interopDefault($g5Y9E$mitt))();\n    }\n    $516c8d13080d4552$export$691d3e4b1045a188.prototype.addEventListener = function(event, handler) {\n        this.emitter.on.apply(this, [\n            event,\n            handler\n        ]);\n    };\n    $516c8d13080d4552$export$691d3e4b1045a188.prototype.removeEventListener = function(event, handler) {\n        if (this.emitter) this.emitter.off.apply(this, [\n            event,\n            handler\n        ]);\n    };\n    $516c8d13080d4552$export$691d3e4b1045a188.prototype.clear = function() {\n        this.emitter.all.clear();\n    };\n    $516c8d13080d4552$export$691d3e4b1045a188.prototype.emit = function(event, data) {\n        if (this.emitter) this.emitter.emit.apply(this, [\n            event,\n            data\n        ]);\n    };\n    $516c8d13080d4552$export$691d3e4b1045a188.prototype.destroy = function() {\n        this.emitter.all.clear();\n        this.emitter = null;\n    };\n    return $516c8d13080d4552$export$691d3e4b1045a188;\n}();\n\n\nvar $fcdb6cf3608c4662$var$__extends =  false || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $fcdb6cf3608c4662$export$e3425b961a6a8509;\n(function($fcdb6cf3608c4662$export$e3425b961a6a8509) {\n    $fcdb6cf3608c4662$export$e3425b961a6a8509[\"Idle\"] = \"idle\";\n    $fcdb6cf3608c4662$export$e3425b961a6a8509[\"Loading\"] = \"loading\";\n    $fcdb6cf3608c4662$export$e3425b961a6a8509[\"Playing\"] = \"playing\";\n    $fcdb6cf3608c4662$export$e3425b961a6a8509[\"Paused\"] = \"paused\";\n    $fcdb6cf3608c4662$export$e3425b961a6a8509[\"Buffering\"] = \"buffering\";\n    $fcdb6cf3608c4662$export$e3425b961a6a8509[\"Seeking\"] = \"seeking\";\n    $fcdb6cf3608c4662$export$e3425b961a6a8509[\"Ended\"] = \"ended\";\n})($fcdb6cf3608c4662$export$e3425b961a6a8509 || ($fcdb6cf3608c4662$export$e3425b961a6a8509 = {\n}));\nvar $fcdb6cf3608c4662$export$5013cbcdb4d9878b;\n(function($fcdb6cf3608c4662$export$5013cbcdb4d9878b) {\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Loading\"] = \"loading\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Loaded\"] = \"loaded\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Play\"] = \"play\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Resume\"] = \"resume\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Pause\"] = \"pause\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Seeking\"] = \"seeking\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Seeked\"] = \"seeked\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Buffering\"] = \"buffering\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Buffered\"] = \"buffered\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"TimeUpdate\"] = \"timeupdate\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Ended\"] = \"ended\";\n    $fcdb6cf3608c4662$export$5013cbcdb4d9878b[\"Error\"] = \"error\";\n})($fcdb6cf3608c4662$export$5013cbcdb4d9878b || ($fcdb6cf3608c4662$export$5013cbcdb4d9878b = {\n}));\nvar $fcdb6cf3608c4662$var$NetworkState;\n(function(NetworkState) {\n    NetworkState[NetworkState[\"NETWORK_EMPTY\"] = 0] = \"NETWORK_EMPTY\";\n    NetworkState[NetworkState[\"NETWORK_IDLE\"] = 1] = \"NETWORK_IDLE\";\n    NetworkState[NetworkState[\"NETWORK_LOADING\"] = 2] = \"NETWORK_LOADING\";\n    NetworkState[NetworkState[\"NETWORK_NO_SOURCE\"] = 3] = \"NETWORK_NO_SOURCE\";\n})($fcdb6cf3608c4662$var$NetworkState || ($fcdb6cf3608c4662$var$NetworkState = {\n}));\nvar $fcdb6cf3608c4662$var$ReadyState;\n(function(ReadyState) {\n    ReadyState[ReadyState[\"HAVE_NOTHING\"] = 0] = \"HAVE_NOTHING\";\n    ReadyState[ReadyState[\"HAVE_METADATA\"] = 1] = \"HAVE_METADATA\";\n    ReadyState[ReadyState[\"HAVE_CURRENT_DATA\"] = 2] = \"HAVE_CURRENT_DATA\";\n    ReadyState[ReadyState[\"HAVE_FUTURE_DATA\"] = 3] = \"HAVE_FUTURE_DATA\";\n    ReadyState[ReadyState[\"HAVE_ENOUGH_DATA\"] = 4] = \"HAVE_ENOUGH_DATA\";\n})($fcdb6cf3608c4662$var$ReadyState || ($fcdb6cf3608c4662$var$ReadyState = {\n}));\nfunction $fcdb6cf3608c4662$var$getInitialState(videoElement) {\n    if (videoElement.readyState === $fcdb6cf3608c4662$var$ReadyState.HAVE_NOTHING && videoElement.networkState === $fcdb6cf3608c4662$var$NetworkState.NETWORK_EMPTY) return $fcdb6cf3608c4662$export$e3425b961a6a8509.Idle;\n    else if (videoElement.networkState === $fcdb6cf3608c4662$var$NetworkState.NETWORK_LOADING) return $fcdb6cf3608c4662$export$e3425b961a6a8509.Loading;\n    else if (!videoElement.ended) return videoElement.paused ? $fcdb6cf3608c4662$export$e3425b961a6a8509.Paused : $fcdb6cf3608c4662$export$e3425b961a6a8509.Playing;\n    return $fcdb6cf3608c4662$export$e3425b961a6a8509.Ended;\n}\nvar $fcdb6cf3608c4662$export$68ce463a75cf738d = function(_super) {\n    $fcdb6cf3608c4662$var$__extends($fcdb6cf3608c4662$export$68ce463a75cf738d, _super);\n    function $fcdb6cf3608c4662$export$68ce463a75cf738d(videoElement) {\n        var _this = _super.call(this) || this;\n        _this.listeners = [];\n        _this.videoElement = videoElement;\n        if (typeof videoElement === \"string\") _this.videoElement = document.querySelector(videoElement);\n        _this.state = $fcdb6cf3608c4662$var$getInitialState(videoElement);\n        _this.setupEventListeners();\n        return _this;\n    }\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.setupEventListeners = function() {\n        this.addListener(\"loadstart\", this.onLoading);\n        this.addListener(\"loadeddata\", this.onLoaded);\n        this.addListener(\"playing\", this.onPlaying);\n        this.addListener(\"pause\", this.onPause);\n        this.addListener(\"seeking\", this.onSeeking);\n        this.addListener(\"seeked\", this.onSeeked);\n        this.addListener(\"waiting\", this.onBuffering);\n        this.addListener(\"timeupdate\", this.onTimeUpdate);\n        this.addListener(\"error\", this.onError);\n        this.addListener(\"ended\", this.onEnded);\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.addListener = function(type, handler) {\n        var boundHandler = handler.bind(this);\n        this.videoElement.addEventListener(type, boundHandler);\n        this.listeners.push({\n            type: type,\n            handler: boundHandler\n        });\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onLoading = function() {\n        if (this.state === $fcdb6cf3608c4662$export$e3425b961a6a8509.Loading) return;\n        this.setState($fcdb6cf3608c4662$export$e3425b961a6a8509.Loading);\n        this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Loading);\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onLoaded = function() {\n        if (this.state === $fcdb6cf3608c4662$export$e3425b961a6a8509.Loading) this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Loaded);\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onPlaying = function() {\n        if (this.state === $fcdb6cf3608c4662$export$e3425b961a6a8509.Ended) this.setState($fcdb6cf3608c4662$export$e3425b961a6a8509.Loading);\n        if ([\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Loading,\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Paused\n        ].includes(this.state)) {\n            if (this.state === $fcdb6cf3608c4662$export$e3425b961a6a8509.Loading) this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Play);\n            if (this.state === $fcdb6cf3608c4662$export$e3425b961a6a8509.Paused) {\n                this.lastState = $fcdb6cf3608c4662$export$e3425b961a6a8509.Paused;\n                this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Resume);\n            }\n            this.setState($fcdb6cf3608c4662$export$e3425b961a6a8509.Playing, true);\n        }\n        if (this.state === $fcdb6cf3608c4662$export$e3425b961a6a8509.Buffering) this.onBuffered();\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onPause = function() {\n        var _this = this;\n        if (this.state !== $fcdb6cf3608c4662$export$e3425b961a6a8509.Playing) return;\n        clearTimeout(this.pauseDebounce);\n        this.pauseDebounce = window.setTimeout(function() {\n            _this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Pause);\n            _this.setState($fcdb6cf3608c4662$export$e3425b961a6a8509.Paused, true);\n        }, 200);\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onSeeking = function() {\n        if ([\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Loading,\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Seeking,\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Ended\n        ].includes(this.state)) return;\n        clearTimeout(this.pauseDebounce);\n        this.setState($fcdb6cf3608c4662$export$e3425b961a6a8509.Seeking, true);\n        this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Seeking);\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onSeeked = function() {\n        if (this.state !== $fcdb6cf3608c4662$export$e3425b961a6a8509.Seeking) return;\n        this.setState(this.lastState, true);\n        this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Seeked);\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onBuffering = function() {\n        if ([\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Loading,\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Buffering,\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Seeking,\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Ended, \n        ].includes(this.state)) return;\n        this.setState($fcdb6cf3608c4662$export$e3425b961a6a8509.Buffering, true);\n        this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Buffering);\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onBuffered = function() {\n        if (this.state !== $fcdb6cf3608c4662$export$e3425b961a6a8509.Buffering) return;\n        this.setState(this.lastState, true);\n        this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Buffered);\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onTimeUpdate = function() {\n        if (this.videoElement.seeking || [\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Loading,\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Paused,\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Seeking,\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Buffering,\n            $fcdb6cf3608c4662$export$e3425b961a6a8509.Ended, \n        ].includes(this.state)) return;\n        this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.TimeUpdate);\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onEnded = function() {\n        clearTimeout(this.pauseDebounce);\n        if (this.state === $fcdb6cf3608c4662$export$e3425b961a6a8509.Ended) return;\n        this.setState($fcdb6cf3608c4662$export$e3425b961a6a8509.Ended);\n        this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Ended);\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.onError = function() {\n        if (this.state === $fcdb6cf3608c4662$export$e3425b961a6a8509.Ended) return;\n        this.emit($fcdb6cf3608c4662$export$5013cbcdb4d9878b.Error, this.videoElement.error);\n        this.onEnded();\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.getState = function() {\n        return this.state;\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.setState = function(state, updateLast) {\n        if (updateLast) this.updateLastState(this.state);\n        this.state = state;\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.updateLastState = function(state) {\n        if (state) this.lastState = state;\n        else this.lastState = this.state;\n    };\n    $fcdb6cf3608c4662$export$68ce463a75cf738d.prototype.destroy = function() {\n        var _this = this;\n        this.listeners.forEach(function(_a) {\n            var type = _a.type, handler = _a.handler;\n            _this.videoElement.removeEventListener(type, handler);\n        });\n        _super.prototype.destroy.call(this);\n    };\n    return $fcdb6cf3608c4662$export$68ce463a75cf738d;\n}($516c8d13080d4552$export$691d3e4b1045a188);\n\n\n\n\n//# sourceMappingURL=index.js.map\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@eyevinn/video-event-filter/dist/index.js?");

/***/ }),

/***/ "./node_modules/@eyevinn/video-event-filter/node_modules/mitt/dist/mitt.es.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@eyevinn/video-event-filter/node_modules/mitt/dist/mitt.es.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i&&i.push(e)||n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&i.splice(i.indexOf(e)>>>0,1)},emit:function(t,e){(n.get(t)||[]).slice().map(function(n){n(e)}),(n.get(\"*\")||[]).slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.es.js.map\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@eyevinn/video-event-filter/node_modules/mitt/dist/mitt.es.js?");

/***/ }),

/***/ "./node_modules/@eyevinn/webrtc-player/dist/main.js":
/*!**********************************************************!*\
  !*** ./node_modules/@eyevinn/webrtc-player/dist/main.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var $a1w4g$events = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\nvar $a1w4g$eyevinncsaimanager = __webpack_require__(/*! @eyevinn/csai-manager */ \"./node_modules/@eyevinn/csai-manager/dist/index.js\");\nvar $a1w4g$eyevinnwhppclient = __webpack_require__(/*! @eyevinn/whpp-client */ \"./node_modules/@eyevinn/whpp-client/dist/whpp-client.m.js\");\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n$parcel$export(module.exports, \"WebRTCPlayer\", () => $8c8737df5845fd96$export$f6039712bf1ca949);\n$parcel$export(module.exports, \"ListAvailableAdapters\", () => $4366558ee7129abf$export$62ed887aeb7fab64);\n\nclass $d580fda374b2d4e1$export$1bee3ffe1758e87d {\n    client = undefined;\n    localPeer = undefined;\n    debug = false;\n    constructor(peer, channelUrl, onError){\n        this.channelUrl = channelUrl;\n        this.resetPeer(peer);\n    }\n    enableDebug() {\n        this.debug = true;\n    }\n    resetPeer(newPeer) {\n        this.localPeer = newPeer;\n    }\n    getPeer() {\n        return this.localPeer;\n    }\n    async connect(opts) {\n        if (this.localPeer) {\n            this.client = new (0, $a1w4g$eyevinnwhppclient.WHPPClient)(this.localPeer, this.channelUrl, {\n                debug: this.debug\n            });\n            await this.client.connect();\n        }\n    }\n    async disconnect() {\n        return;\n    }\n    log(...args) {\n        if (this.debug) console.log(\"WebRTC-player\", ...args);\n    }\n    error(...args) {\n        console.error(\"WebRTC-player\", ...args);\n    }\n}\n\n\nconst $9c9759905f118312$var$DEFAULT_CONNECT_TIMEOUT = 2000;\nclass $9c9759905f118312$export$5463baa67f138efa {\n    waitingForCandidates = false;\n    resourceUrl = undefined;\n    constructor(peer, channelUrl, onError){\n        this.channelUrl = channelUrl;\n        this.debug = true;\n        this.resetPeer(peer);\n    }\n    enableDebug() {\n        this.debug = true;\n    }\n    resetPeer(newPeer) {\n        this.localPeer = newPeer;\n        this.localPeer.onicegatheringstatechange = this.onIceGatheringStateChange.bind(this);\n        this.localPeer.oniceconnectionstatechange = this.onIceConnectionStateChange.bind(this);\n        this.localPeer.onicecandidateerror = this.onIceCandidateError.bind(this);\n        this.localPeer.onicecandidate = this.onIceCandidate.bind(this);\n    }\n    getPeer() {\n        return this.localPeer;\n    }\n    async connect(opts) {\n        if (!this.localPeer) {\n            this.log(\"Local RTC peer not initialized\");\n            return;\n        }\n        this.localPeer.addTransceiver(\"video\", {\n            direction: \"recvonly\"\n        });\n        this.localPeer.addTransceiver(\"audio\", {\n            direction: \"recvonly\"\n        });\n        const offer = await this.localPeer.createOffer({\n            offerToReceiveAudio: true,\n            offerToReceiveVideo: true\n        });\n        this.localPeer.setLocalDescription(offer);\n        this.waitingForCandidates = true;\n        this.iceGatheringTimeout = setTimeout(this.onIceGatheringTimeout.bind(this), opts && opts.timeout || $9c9759905f118312$var$DEFAULT_CONNECT_TIMEOUT);\n    }\n    async disconnect() {\n        return;\n    }\n    log(...args) {\n        if (this.debug) console.log(\"WebRTC-player\", ...args);\n    }\n    error(...args) {\n        console.error(\"WebRTC-player\", ...args);\n    }\n    onIceGatheringStateChange(event) {\n        if (!this.localPeer) {\n            this.log(\"Local RTC peer not initialized\");\n            return;\n        }\n        this.log(\"IceGatheringState\", this.localPeer.iceGatheringState);\n        if (this.localPeer.iceGatheringState !== \"complete\" || !this.waitingForCandidates) return;\n        this.onDoneWaitingForCandidates();\n    }\n    onIceConnectionStateChange() {\n        if (!this.localPeer) {\n            this.log(\"Local RTC peer not initialized\");\n            return;\n        }\n        this.log(\"IceConnectionState\", this.localPeer.iceConnectionState);\n        if (this.localPeer.iceConnectionState === \"failed\") this.localPeer.close();\n    }\n    async onIceCandidate(event) {\n        if (event.type !== \"icecandidate\") return;\n        const candidateEvent = event;\n        const candidate = candidateEvent.candidate;\n        if (!candidate) return;\n        this.log(\"IceCandidate\", candidate.candidate);\n    }\n    onIceCandidateError(e) {\n        this.log(\"IceCandidateError\", e);\n    }\n    onIceGatheringTimeout() {\n        this.log(\"IceGatheringTimeout\");\n        if (!this.waitingForCandidates) return;\n        this.onDoneWaitingForCandidates();\n    }\n    async onDoneWaitingForCandidates() {\n        if (!this.localPeer) {\n            this.log(\"Local RTC peer not initialized\");\n            return;\n        }\n        this.waitingForCandidates = false;\n        clearTimeout(this.iceGatheringTimeout);\n        const response = await fetch(this.channelUrl.toString(), {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                sdp: this.localPeer.localDescription?.sdp\n            })\n        });\n        if (response.ok) {\n            const { sdp: sdp  } = await response.json();\n            this.localPeer.setRemoteDescription({\n                type: \"answer\",\n                sdp: sdp\n            });\n        }\n    }\n}\n\n\nconst $4c7e7e20a6e4dde3$var$DEFAULT_CONNECT_TIMEOUT = 2000;\nlet $4c7e7e20a6e4dde3$export$2351e2e8d1fcfd84;\n(function(WHEPType) {\n    WHEPType[WHEPType[\"Client\"] = 0] = \"Client\";\n    WHEPType[WHEPType[\"Server\"] = 1] = \"Server\";\n})($4c7e7e20a6e4dde3$export$2351e2e8d1fcfd84 || ($4c7e7e20a6e4dde3$export$2351e2e8d1fcfd84 = {}));\nclass $4c7e7e20a6e4dde3$export$e35e1b35ea68c1 {\n    debug = false;\n    waitingForCandidates = false;\n    resource = null;\n    constructor(peer, channelUrl, onError, mediaConstraints, authKey){\n        this.mediaConstraints = mediaConstraints;\n        this.channelUrl = channelUrl;\n        if (typeof this.channelUrl === \"string\") throw new Error(`channelUrl parameter expected to be an URL not a string`);\n        this.whepType = $4c7e7e20a6e4dde3$export$2351e2e8d1fcfd84.Client;\n        this.authKey = authKey;\n        this.onErrorHandler = onError;\n        this.audio = !this.mediaConstraints.videoOnly;\n        this.video = !this.mediaConstraints.audioOnly;\n        this.resetPeer(peer);\n    }\n    enableDebug() {\n        this.debug = true;\n    }\n    resetPeer(newPeer) {\n        this.localPeer = newPeer;\n        this.localPeer.onicegatheringstatechange = this.onIceGatheringStateChange.bind(this);\n        this.localPeer.onicecandidate = this.onIceCandidate.bind(this);\n    }\n    getPeer() {\n        return this.localPeer;\n    }\n    async connect(opts) {\n        try {\n            await this.initSdpExchange();\n        } catch (error) {\n            console.error(error.toString());\n            this.onErrorHandler(\"connecterror\");\n        }\n    }\n    async disconnect() {\n        if (this.resource) {\n            this.log(`Disconnecting by removing resource ${this.resource}`);\n            const headers = {};\n            this.authKey && (headers[\"Authorization\"] = this.authKey);\n            const response = await fetch(this.resource, {\n                method: \"DELETE\",\n                headers: headers\n            });\n            if (response.ok) this.log(`Successfully removed resource`);\n        }\n    }\n    async initSdpExchange() {\n        clearTimeout(this.iceGatheringTimeout);\n        if (this.localPeer && this.whepType === $4c7e7e20a6e4dde3$export$2351e2e8d1fcfd84.Client) {\n            if (this.video) this.localPeer.addTransceiver(\"video\", {\n                direction: \"recvonly\"\n            });\n            if (this.audio) this.localPeer.addTransceiver(\"audio\", {\n                direction: \"recvonly\"\n            });\n            const offer = await this.localPeer.createOffer();\n            // To add NACK in offer we have to add it manually see https://bugs.chromium.org/p/webrtc/issues/detail?id=4543 for details\n            if (offer.sdp) {\n                const opusCodecId = offer.sdp.match(/a=rtpmap:(\\d+) opus\\/48000\\/2/);\n                if (opusCodecId !== null) offer.sdp = offer.sdp.replace(\"opus/48000/2\\r\\n\", \"opus/48000/2\\r\\na=rtcp-fb:\" + opusCodecId[1] + \" nack\\r\\n\");\n            }\n            await this.localPeer.setLocalDescription(offer);\n            this.waitingForCandidates = true;\n            this.iceGatheringTimeout = setTimeout(this.onIceGatheringTimeout.bind(this), $4c7e7e20a6e4dde3$var$DEFAULT_CONNECT_TIMEOUT);\n        } else if (this.localPeer) {\n            const offer = await this.requestOffer();\n            await this.localPeer.setRemoteDescription({\n                type: \"offer\",\n                sdp: offer\n            });\n            const answer = await this.localPeer.createAnswer();\n            try {\n                await this.localPeer.setLocalDescription(answer);\n                this.waitingForCandidates = true;\n                this.iceGatheringTimeout = setTimeout(this.onIceGatheringTimeout.bind(this), $4c7e7e20a6e4dde3$var$DEFAULT_CONNECT_TIMEOUT);\n            } catch (error) {\n                this.log(answer.sdp);\n                throw error;\n            }\n        }\n    }\n    async onIceCandidate(event) {\n        if (event.type !== \"icecandidate\") return;\n        const candidateEvent = event;\n        const candidate = candidateEvent.candidate;\n        if (!candidate) return;\n        this.log(candidate.candidate);\n    }\n    onIceGatheringStateChange(event) {\n        if (this.localPeer) {\n            this.log(\"IceGatheringState\", this.localPeer.iceGatheringState);\n            if (this.localPeer.iceGatheringState !== \"complete\" || !this.waitingForCandidates) return;\n            this.onDoneWaitingForCandidates();\n        }\n    }\n    onIceGatheringTimeout() {\n        this.log(\"IceGatheringTimeout\");\n        if (!this.waitingForCandidates) return;\n        this.onDoneWaitingForCandidates();\n    }\n    async onDoneWaitingForCandidates() {\n        this.waitingForCandidates = false;\n        clearTimeout(this.iceGatheringTimeout);\n        if (this.whepType === $4c7e7e20a6e4dde3$export$2351e2e8d1fcfd84.Client) await this.sendOffer();\n        else await this.sendAnswer();\n    }\n    getResouceUrlFromHeaders(headers) {\n        if (headers.get(\"Location\") && headers.get(\"Location\")?.match(/^\\//)) {\n            const resourceUrl = new URL(headers.get(\"Location\"), this.channelUrl.origin);\n            return resourceUrl.toString();\n        } else return headers.get(\"Location\");\n    }\n    async requestOffer() {\n        if (this.whepType === $4c7e7e20a6e4dde3$export$2351e2e8d1fcfd84.Server) {\n            this.log(`Requesting offer from: ${this.channelUrl}`);\n            const headers = {\n                \"Content-Type\": \"application/sdp\"\n            };\n            this.authKey && (headers[\"Authorization\"] = this.authKey);\n            const response = await fetch(this.channelUrl.toString(), {\n                method: \"POST\",\n                headers: headers,\n                body: \"\"\n            });\n            if (response.ok) {\n                this.resource = this.getResouceUrlFromHeaders(response.headers);\n                this.log(\"WHEP Resource\", this.resource);\n                const offer = await response.text();\n                this.log(\"Received offer\", offer);\n                return offer;\n            } else {\n                const serverMessage = await response.text();\n                throw new Error(serverMessage);\n            }\n        }\n    }\n    async sendAnswer() {\n        if (!this.localPeer) {\n            this.log(\"Local RTC peer not initialized\");\n            return;\n        }\n        if (this.whepType === $4c7e7e20a6e4dde3$export$2351e2e8d1fcfd84.Server && this.resource) {\n            const answer = this.localPeer.localDescription;\n            if (answer) {\n                const headers = {\n                    \"Content-Type\": \"application/sdp\"\n                };\n                this.authKey && (headers[\"Authorization\"] = this.authKey);\n                const response = await fetch(this.resource, {\n                    method: \"PATCH\",\n                    headers: headers,\n                    body: answer.sdp\n                });\n                if (!response.ok) this.error(`sendAnswer response: ${response.status}`);\n            }\n        }\n    }\n    async sendOffer() {\n        if (!this.localPeer) {\n            this.log(\"Local RTC peer not initialized\");\n            return;\n        }\n        const offer = this.localPeer.localDescription;\n        if (this.whepType === $4c7e7e20a6e4dde3$export$2351e2e8d1fcfd84.Client && offer) {\n            this.log(`Sending offer to ${this.channelUrl}`);\n            const headers = {\n                \"Content-Type\": \"application/sdp\"\n            };\n            this.authKey && (headers[\"Authorization\"] = this.authKey);\n            const response = await fetch(this.channelUrl.toString(), {\n                method: \"POST\",\n                headers: headers,\n                body: offer.sdp\n            });\n            if (response.ok) {\n                this.resource = this.getResouceUrlFromHeaders(response.headers);\n                this.log(\"WHEP Resource\", this.resource);\n                const answer = await response.text();\n                await this.localPeer.setRemoteDescription({\n                    type: \"answer\",\n                    sdp: answer\n                });\n            } else if (response.status === 400) {\n                this.log(`server does not support client-offer, need to reconnect`);\n                this.whepType = $4c7e7e20a6e4dde3$export$2351e2e8d1fcfd84.Server;\n                this.onErrorHandler(\"reconnectneeded\");\n            } else if (response.status === 406 && this.audio && !this.mediaConstraints.audioOnly && !this.mediaConstraints.videoOnly) {\n                this.log(`maybe server does not support audio. Let's retry without audio`);\n                this.audio = false;\n                this.video = true;\n                this.onErrorHandler(\"reconnectneeded\");\n            } else if (response.status === 406 && this.video && !this.mediaConstraints.audioOnly && !this.mediaConstraints.videoOnly) {\n                this.log(`maybe server does not support video. Let's retry without video`);\n                this.audio = true;\n                this.video = false;\n                this.onErrorHandler(\"reconnectneeded\");\n            } else {\n                this.error(`sendAnswer response: ${response.status}`);\n                this.onErrorHandler(\"connectionfailed\");\n            }\n        }\n    }\n    log(...args) {\n        if (this.debug) console.log(\"WebRTC-player\", ...args);\n    }\n    error(...args) {\n        console.error(\"WebRTC-player\", ...args);\n    }\n}\n\n\nconst $4366558ee7129abf$var$WHPPAdapterFactory = (peer, channelUrl, onError, mediaConstraints, authKey)=>{\n    return new (0, $d580fda374b2d4e1$export$1bee3ffe1758e87d)(peer, channelUrl, onError);\n};\nconst $4366558ee7129abf$var$EyevinnAdapterFactory = (peer, channelUrl, onError, mediaConstraints, authKey)=>{\n    return new (0, $9c9759905f118312$export$5463baa67f138efa)(peer, channelUrl, onError);\n};\nconst $4366558ee7129abf$var$WHEPAdapterFactory = (peer, channelUrl, onError, mediaConstraints, authKey)=>{\n    return new (0, $4c7e7e20a6e4dde3$export$e35e1b35ea68c1)(peer, channelUrl, onError, mediaConstraints, authKey);\n};\nconst $4366558ee7129abf$var$adapters = {\n    \"se.eyevinn.whpp\": $4366558ee7129abf$var$WHPPAdapterFactory,\n    \"se.eyevinn.webrtc\": $4366558ee7129abf$var$EyevinnAdapterFactory,\n    whep: $4366558ee7129abf$var$WHEPAdapterFactory\n};\nfunction $4366558ee7129abf$export$4f24674036ad9ae3(type, peer, channelUrl, onError, mediaConstraints, authKey) {\n    return $4366558ee7129abf$var$adapters[type](peer, channelUrl, onError, mediaConstraints, authKey);\n}\nfunction $4366558ee7129abf$export$62ed887aeb7fab64() {\n    return Object.keys($4366558ee7129abf$var$adapters);\n}\n\n\n\n\n\nlet $8c8737df5845fd96$var$Message;\n(function(Message) {\n    Message[\"NO_MEDIA\"] = \"no-media\";\n    Message[\"MEDIA_RECOVERED\"] = \"media-recovered\";\n    Message[\"PEER_CONNECTION_FAILED\"] = \"peer-connection-failed\";\n    Message[\"INITIAL_CONNECTION_FAILED\"] = \"initial-connection-failed\";\n    Message[\"CONNECT_ERROR\"] = \"connect-error\";\n})($8c8737df5845fd96$var$Message || ($8c8737df5845fd96$var$Message = {}));\nconst $8c8737df5845fd96$var$MediaConstraintsDefaults = {\n    audioOnly: false,\n    videoOnly: false\n};\nconst $8c8737df5845fd96$var$RECONNECT_ATTEMPTS = 2;\nclass $8c8737df5845fd96$export$f6039712bf1ca949 extends (0, $a1w4g$events.EventEmitter) {\n    peer = {};\n    adapterFactory = undefined;\n    channelUrl = {};\n    authKey = undefined;\n    reconnectAttemptsLeft = $8c8737df5845fd96$var$RECONNECT_ATTEMPTS;\n    adapter = {};\n    statsTypeFilter = undefined;\n    msStatsInterval = 5000;\n    mediaTimeoutOccured = false;\n    mediaTimeoutThreshold = 30000;\n    timeoutThresholdCounter = 0;\n    bytesReceived = 0;\n    constructor(opts){\n        super();\n        this.mediaConstraints = {\n            ...$8c8737df5845fd96$var$MediaConstraintsDefaults,\n            ...opts.mediaConstraints\n        };\n        this.videoElement = opts.video;\n        this.adapterType = opts.type;\n        this.adapterFactory = opts.adapterFactory;\n        this.statsTypeFilter = opts.statsTypeFilter;\n        this.mediaTimeoutThreshold = opts.timeoutThreshold ?? this.mediaTimeoutThreshold;\n        this.iceServers = [\n            {\n                urls: \"stun:stun.l.google.com:19302\"\n            }\n        ];\n        if (opts.iceServers) this.iceServers = opts.iceServers;\n        this.debug = !!opts.debug;\n        if (opts.vmapUrl) {\n            this.csaiManager = new (0, $a1w4g$eyevinncsaimanager.CSAIManager)({\n                contentVideoElement: this.videoElement,\n                vmapUrl: opts.vmapUrl,\n                isLive: true,\n                autoplay: true\n            });\n            this.videoElement.addEventListener(\"ended\", ()=>{\n                if (this.csaiManager) this.csaiManager.destroy();\n            });\n        }\n    }\n    async load(channelUrl, authKey) {\n        this.channelUrl = channelUrl;\n        this.authKey = authKey;\n        this.connect();\n    }\n    // eslint-disable-next-line  @typescript-eslint/no-explicit-any\n    log(...args) {\n        if (this.debug) console.log(\"WebRTC-player\", ...args);\n    }\n    // eslint-disable-next-line  @typescript-eslint/no-explicit-any\n    error(...args) {\n        console.error(\"WebRTC-player\", ...args);\n    }\n    async onConnectionStateChange() {\n        if (this.peer.connectionState === \"failed\") {\n            this.emit($8c8737df5845fd96$var$Message.PEER_CONNECTION_FAILED);\n            this.peer && this.peer.close();\n            if (this.reconnectAttemptsLeft <= 0) {\n                this.error(\"Connection failed, reconnecting failed\");\n                return;\n            }\n            this.log(`Connection failed, recreating peer connection, attempts left ${this.reconnectAttemptsLeft}`);\n            await this.connect();\n            this.reconnectAttemptsLeft--;\n        } else if (this.peer.connectionState === \"connected\") {\n            this.log(\"Connected\");\n            this.reconnectAttemptsLeft = $8c8737df5845fd96$var$RECONNECT_ATTEMPTS;\n        }\n    }\n    onErrorHandler(error) {\n        this.log(`onError=${error}`);\n        switch(error){\n            case \"reconnectneeded\":\n                this.peer && this.peer.close();\n                this.videoElement.srcObject = null;\n                this.setupPeer();\n                this.adapter.resetPeer(this.peer);\n                this.adapter.connect();\n                break;\n            case \"connectionfailed\":\n                this.peer && this.peer.close();\n                this.videoElement.srcObject = null;\n                this.emit($8c8737df5845fd96$var$Message.INITIAL_CONNECTION_FAILED);\n                break;\n            case \"connecterror\":\n                this.peer && this.peer.close();\n                this.adapter.resetPeer(this.peer);\n                this.emit($8c8737df5845fd96$var$Message.CONNECT_ERROR);\n                break;\n        }\n    }\n    async onConnectionStats() {\n        if (this.peer && this.statsTypeFilter) {\n            let bytesReceivedBlock = 0;\n            const stats = await this.peer.getStats(null);\n            stats.forEach((report)=>{\n                if (report.type.match(this.statsTypeFilter)) this.emit(`stats:${report.type}`, report);\n                //inbound-rtp attribute bytesReceived from stats report will contain the total number of bytes received for this SSRC.\n                //In this case there are several SSRCs. They are all added together in each onConnectionStats iteration and compared to their value during the previous iteration.\n                if (report.type.match(\"inbound-rtp\")) bytesReceivedBlock += report.bytesReceived;\n            });\n            if (bytesReceivedBlock <= this.bytesReceived) {\n                this.timeoutThresholdCounter += this.msStatsInterval;\n                if (this.mediaTimeoutOccured === false && this.timeoutThresholdCounter >= this.mediaTimeoutThreshold) {\n                    this.emit($8c8737df5845fd96$var$Message.NO_MEDIA);\n                    this.mediaTimeoutOccured = true;\n                }\n            } else {\n                this.bytesReceived = bytesReceivedBlock;\n                this.timeoutThresholdCounter = 0;\n                if (this.mediaTimeoutOccured == true) {\n                    this.emit($8c8737df5845fd96$var$Message.MEDIA_RECOVERED);\n                    this.mediaTimeoutOccured = false;\n                }\n            }\n        }\n    }\n    setupPeer() {\n        this.peer = new RTCPeerConnection({\n            iceServers: this.iceServers\n        });\n        this.peer.onconnectionstatechange = this.onConnectionStateChange.bind(this);\n        this.peer.ontrack = this.onTrack.bind(this);\n    }\n    onTrack(event) {\n        for (const stream of event.streams){\n            if (stream.id === \"feedbackvideomslabel\") continue;\n            console.log(\"Set video element remote stream to \" + stream.id, \" audio \" + stream.getAudioTracks().length + \" video \" + stream.getVideoTracks().length);\n            // Create a new MediaStream if we don't have one\n            if (!this.videoElement.srcObject) this.videoElement.srcObject = new MediaStream();\n            // We might have one stream of both audio and video, or separate streams for audio and video\n            for (const track of stream.getTracks())this.videoElement.srcObject.addTrack(track);\n        }\n    }\n    async connect() {\n        this.setupPeer();\n        if (this.adapterType !== \"custom\") this.adapter = (0, $4366558ee7129abf$export$4f24674036ad9ae3)(this.adapterType, this.peer, this.channelUrl, this.onErrorHandler.bind(this), this.mediaConstraints, this.authKey);\n        else if (this.adapterFactory) this.adapter = this.adapterFactory(this.peer, this.channelUrl, this.onErrorHandler.bind(this), this.mediaConstraints, this.authKey);\n        if (!this.adapter) throw new Error(`Failed to create adapter (${this.adapterType})`);\n        if (this.debug) this.adapter.enableDebug();\n        this.statsInterval = setInterval(this.onConnectionStats.bind(this), this.msStatsInterval);\n        try {\n            await this.adapter.connect();\n        } catch (error) {\n            console.error(error);\n            this.stop();\n        }\n    }\n    mute() {\n        this.videoElement.muted = true;\n    }\n    unmute() {\n        this.videoElement.muted = false;\n    }\n    async unload() {\n        await this.adapter.disconnect();\n        this.stop();\n    }\n    stop() {\n        clearInterval(this.statsInterval);\n        this.peer.close();\n        this.videoElement.srcObject = null;\n        this.videoElement.load();\n    }\n    destroy() {\n        this.stop();\n        this.removeAllListeners();\n    }\n}\n\n\n//# sourceMappingURL=main.js.map\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@eyevinn/webrtc-player/dist/main.js?");

/***/ }),

/***/ "./node_modules/@eyevinn/whpp-client/dist/whpp-client.m.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@eyevinn/whpp-client/dist/whpp-client.m.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WHPPClient: () => (/* binding */ e)\n/* harmony export */ });\nvar e=/*#__PURE__*/function(){function e(e,t,n){this.localPeer=void 0,this.whppUrl=void 0,this.iceGatheringTimeout=void 0,this.waitingForCandidates=!1,this.resourceUrl=void 0,this.opts=void 0,this.localPeer=e,this.whppUrl=t,this.opts=n,this.localPeer.onicegatheringstatechange=this.onIceGatheringStateChange.bind(this),this.localPeer.oniceconnectionstatechange=this.onIceConnectionStateChange.bind(this),this.localPeer.onicecandidateerror=this.onIceCandidateError.bind(this),this.localPeer.onicecandidate=this.onIceCandidate.bind(this)}var t=e.prototype;return t.getPeer=function(){return this.localPeer},t.connect=function(){try{var e,t=this;return Promise.resolve(fetch(t.whppUrl.href,{method:\"POST\",headers:{\"Content-Type\":null!=(e=t.opts)&&e.useLegacyContentType?\"application/json\":\"application/whpp+json\"},body:\"{}\"})).then(function(e){var n;function o(o){return n?o:Promise.resolve(e.json()).then(function(n){var o=e.headers.get(\"location\");return t.resourceUrl=new URL(o),t.log(n.offer),Promise.resolve(function(e){try{return Promise.resolve(fetch(e.href,{method:\"OPTIONS\"})).then(function(e){return!(!e.ok||!e.headers.get(\"Allow\")||!e.headers.get(\"Allow\").split(\",\").find(function(e){return\"PATCH\"===e.trimStart()}))})}catch(e){return Promise.reject(e)}}(t.resourceUrl)).then(function(e){return t.log(\"ICE trickle supported by endpoint: \"+e),t.opts||(t.opts={}),t.opts.noIceTrickle=!e,t.supportsTrickleIce()||(t.waitingForCandidates=!0),Promise.resolve(t.localPeer.setRemoteDescription({type:\"offer\",sdp:n.offer})).then(function(){return Promise.resolve(t.localPeer.createAnswer()).then(function(e){return Promise.resolve(t.localPeer.setLocalDescription(e)).then(function(){var e=function(){if(t.supportsTrickleIce())return t.log(\"ICE trickle supported, sending answer\"),Promise.resolve(t.sendAnswer()).then(function(){});var e;t.iceGatheringTimeout=setTimeout(t.onIceGatheringTimeout.bind(t),(null==(e=t.opts)?void 0:e.timeout)||2e3)}();if(e&&e.then)return e.then(function(){})})})})})})}var r=function(){if(!e.ok)return function(){if(415===e.status)return t.opts.useLegacyContentType=!0,Promise.resolve(fetch(t.whppUrl.href,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:\"{}\"})).then(function(t){e=t});n=1}()}();return r&&r.then?r.then(o):o(r)})}catch(e){return Promise.reject(e)}},t.log=function(){var e,t;null!=(e=this.opts)&&e.debug&&(t=console).log.apply(t,[\"whpp-client\"].concat([].slice.call(arguments)))},t.error=function(){var e;(e=console).error.apply(e,[\"whpp-client\"].concat([].slice.call(arguments)))},t.onIceGatheringStateChange=function(e){this.log(\"IceGatheringState\",this.localPeer.iceGatheringState),\"complete\"===this.localPeer.iceGatheringState&&!this.supportsTrickleIce()&&this.waitingForCandidates&&this.onDoneWaitingForCandidates()},t.onIceConnectionStateChange=function(e){this.log(\"IceConnectionState\",this.localPeer.iceConnectionState),\"failed\"===this.localPeer.iceConnectionState&&this.localPeer.close()},t.onIceCandidate=function(e){try{var t=this;if(\"icecandidate\"!==e.type)return Promise.resolve();var n=e.candidate;return n?(t.log(\"IceCandidate\",n.candidate),t.supportsTrickleIce()?(t.sendCandidate(n),Promise.resolve()):Promise.resolve()):Promise.resolve()}catch(e){return Promise.reject(e)}},t.onIceCandidateError=function(e){this.log(\"IceCandidateError\",e)},t.onIceGatheringTimeout=function(){this.log(\"IceGatheringTimeout\"),!this.supportsTrickleIce()&&this.waitingForCandidates&&this.onDoneWaitingForCandidates()},t.supportsTrickleIce=function(){return this.opts&&!this.opts.noIceTrickle},t.onDoneWaitingForCandidates=function(){try{var e=this;return e.waitingForCandidates=!1,clearTimeout(e.iceGatheringTimeout),Promise.resolve(e.sendAnswer()).then(function(){})}catch(e){return Promise.reject(e)}},t.sendCandidate=function(e){try{var t,n=this;return Promise.resolve(fetch(n.resourceUrl.href,{method:\"PATCH\",headers:{\"Content-Type\":null!=(t=n.opts)&&t.useLegacyContentType?\"application/json\":\"application/whpp+json\"},body:JSON.stringify({candidate:e.candidate})})).then(function(e){e.ok||(n.error(\"sendCandidate response: \"+e.status),405===e.status&&n.log(\"ICE trickle not supported by endpoint\"))})}catch(e){return Promise.reject(e)}},t.sendAnswer=function(){try{var e,t=this,n={answer:t.localPeer.localDescription.sdp};return t.log(n.answer),Promise.resolve(fetch(t.resourceUrl.href,{method:\"PUT\",headers:{\"Content-Type\":null!=(e=t.opts)&&e.useLegacyContentType?\"application/json\":\"application/whpp+json\"},body:JSON.stringify(n)})).then(function(e){e.ok||t.error(\"sendAnswer response: \"+e.status)})}catch(e){return Promise.reject(e)}},e}();\n\n\n//# sourceURL=webpack://trenchy/./node_modules/@eyevinn/whpp-client/dist/whpp-client.m.js?");

/***/ }),

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/***/ ((module) => {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n\n\n//# sourceURL=webpack://trenchy/./node_modules/events/events.js?");

/***/ }),

/***/ "./src/script.ts":
/*!***********************!*\
  !*** ./src/script.ts ***!
  \***********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar webrtc_player_1 = __webpack_require__(/*! @eyevinn/webrtc-player */ \"./node_modules/@eyevinn/webrtc-player/dist/main.js\");\nvar messagesElement = document.getElementById('messages');\nvar lastMessageId = -1;\nfunction main() {\n    return __awaiter(this, void 0, void 0, function () {\n        var player;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    console.log('Loading player');\n                    player = new webrtc_player_1.WebRTCPlayer({\n                        video: document.querySelector('video'),\n                        type: 'whep',\n                        mediaConstraints: {\n                            videoOnly: true,\n                        },\n                    });\n                    return [4 /*yield*/, player.load(new URL(atob('aHR0cHM6Ly9jdXN0b21lci1xMHU5eG8yM2VxdTIxdGYzLmNsb3VkZmxhcmVzdHJlYW0uY29tLzRiMTRhM2Y0NjI2ZTBmNzdkNTgxNjVjYTVjOTlmMTcyL3dlYlJUQy9wbGF5')))];\n                case 1:\n                    _a.sent();\n                    updateMessages();\n                    setInterval(updateMessages, 5000);\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction updateMessages() {\n    return __awaiter(this, void 0, void 0, function () {\n        var response, messages, i, timestamps, _i, timestamps_1, timestamp;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    console.log('Updating messages');\n                    return [4 /*yield*/, fetch(\"http://localhost:28273/messages?last_message_id=\".concat(lastMessageId))];\n                case 1:\n                    response = _a.sent();\n                    return [4 /*yield*/, response.json()];\n                case 2:\n                    messages = _a.sent();\n                    if (messages.length > 0) {\n                        lastMessageId = messages[0].id;\n                        for (i = messages.length - 1; i >= 0; i--) {\n                            messagesElement.prepend(renderMessage(messages[i]));\n                        }\n                    }\n                    timestamps = Array.from(document.getElementsByClassName('timestamp'));\n                    for (_i = 0, timestamps_1 = timestamps; _i < timestamps_1.length; _i++) {\n                        timestamp = timestamps_1[_i];\n                        timestamp.textContent = getTime(timestamp.getAttribute('data-timestamp'));\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\n;\nfunction renderMessage(message) {\n    var emoji = message.category === 'researching' ? '🔬' :\n        message.category === 'buying' ? '💰' :\n            message.category === 'not_buying' ? '🚫' :\n                message.category === 'considering_selling' ? '🤔' :\n                    message.category === 'selling' ? '💸' :\n                        message.category === 'not_selling' ? '⏳' : '';\n    var categorySpan = document.createElement('span');\n    categorySpan.textContent = \"\".concat(emoji, \" \").concat(message.category, \" - \");\n    var timeSpan = document.createElement('span');\n    timeSpan.className = 'timestamp';\n    timeSpan.setAttribute('data-timestamp', message.timestamp);\n    timeSpan.textContent = \"\".concat(getTime(message.timestamp));\n    var contentDiv = document.createElement('div');\n    contentDiv.className = 'message-content';\n    contentDiv.innerHTML = message.message.replace(/\\n/g, '<br>');\n    var messageDiv = document.createElement('div');\n    messageDiv.className = 'message';\n    messageDiv.appendChild(categorySpan);\n    messageDiv.appendChild(timeSpan);\n    messageDiv.appendChild(contentDiv);\n    return messageDiv;\n}\n// Returns a time like \"5 sec ago\"\nfunction getTime(timestamp) {\n    var seconds = Math.floor(((Date.now() / 1000) - parseInt(timestamp)));\n    return (seconds < 60 ? \"\".concat(seconds, \" sec ago\") :\n        seconds < 3600 ? \"\".concat(Math.floor(seconds / 60), \" min ago\") :\n            seconds < 86400 ? \"\".concat(Math.floor(seconds / 3600), \" hours ago\") :\n                \"\".concat(Math.floor(seconds / 86400), \" days ago\"));\n}\nmain().catch(function (e) { console.error(e); });\n\n\n//# sourceURL=webpack://trenchy/./src/script.ts?");

/***/ }),

/***/ "./node_modules/mitt/dist/mitt.mjs":
/*!*****************************************!*\
  !*** ./node_modules/mitt/dist/mitt.mjs ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n\n\n//# sourceURL=webpack://trenchy/./node_modules/mitt/dist/mitt.mjs?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/script.ts");
/******/ 	
/******/ })()
;